"use strict";var R6MMainData=function(){var e={subBasement:{full:"Sub-Basement",short:"SB"},basement:{full:"Basement",short:"B"},firstFloor:{full:"1st Floor",short:"1"},secondFloor:{full:"2nd Floor",short:"2"},thirdFloor:{full:"3rd Floor",short:"3"},fourthFloor:{full:"4th Floor",short:"4"},roof:{full:"Roof",short:"R"}};return{getMapData:function(){return{bank:{name:"Bank",imgUrlPrefix:"bank",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},bartlett:{name:"Bartlett U.",imgUrlPrefix:"bartlett",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},border:{name:"Border",imgUrlPrefix:"border",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},chalet:{name:"Chalet",imgUrlPrefix:"chalet",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},club:{name:"Club House",imgUrlPrefix:"club-house",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},coastline:{name:"Coastline",imgUrlPrefix:"coastline",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},consulate:{name:"Consulate",imgUrlPrefix:"consulate",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},favela:{name:"Favela",imgUrlPrefix:"favela",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.roof}]},fortress:{name:"Fortress",imgUrlPrefix:"fortress",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},hereford:{name:"Hereford",imgUrlPrefix:"hereford",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.roof}]},house:{name:"House",imgUrlPrefix:"house",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},kafe:{name:"Kafe Dostoyevsky",imgUrlPrefix:"kafe",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.roof}]},kanal:{name:"Kanal",imgUrlPrefix:"kanal",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:-1,name:e.subBasement},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},oregon:{name:"Oregon",imgUrlPrefix:"oregon",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.roof}]},outback:{name:"Outback",imgUrlPrefix:"outback",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},plane:{name:"Plane",imgUrlPrefix:"plane",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.roof}]},skyscraper:{name:"Skyscraper",imgUrlPrefix:"skyscraper",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},themepark:{name:"Theme Park",imgUrlPrefix:"themepark",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},tower:{name:"Tower",imgUrlPrefix:"tower",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.roof}]},villa:{name:"Villa",imgUrlPrefix:"villa",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:0,name:e.basement},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.roof}]},yacht:{name:"Yacht",imgUrlPrefix:"yacht",floors:[{index:"bg",name:e.basement,dontSelect:!0},{index:1,name:e.firstFloor,default:!0},{index:2,name:e.secondFloor},{index:3,name:e.thirdFloor},{index:4,name:e.fourthFloor},{index:5,name:e.roof}]}}}}}(),R6MMainRender=function(r){var e={WIDTH:1e5,HEIGHT:1e5,TOP_OFFSET:50012,LEFT_OFFSET:49995};r.fn.removeClassPrefix=function(o){return this.each(function(e,n){var t=n.className.split(" ").filter(function(e){return 0!==e.lastIndexOf(o,0)});n.className=r.trim(t.join(" "))}),this};var s={"-1":"neg-one",0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five"};return{getMapHTML:function(e,n,t){var o,a,i,r,l="";l+=(e.floors,o=e.imgUrlPrefix,a="",a+='<div class="background loading">',a+='<object class="svgMap" data="'+("img/maps/"+o+"/"+o+".svg")+'" type="image/svg+xml" style="visibility: hidden; top: -250px; left: -250px; height: 500px; width: 500px"></object>',a+="</div>"),n.html(l),t.html((e=e.floors,r="",e.forEach(function(e){e.dontSelect||(i=s[e.index],r+='<span class="'+i+'">'+e.name.full+"</span>")}),r))},createMapPanels:function(e,n){for(var t=0;t<n;t++)e.append('<div class="map-container"><div class="helper-border vertical"></div><div class="helper-border horizontal"></div><p class="map-panel-label"></p><div class="map-main"><div class="center-helper"><div class="map-elements"></div><div class="svg-wrapper drawing-markers"></div><div class="svg-wrapper map"></div></div></div></div>')},showFloor:function(e,n,t,o,a){n.attr("selected-floor-index",e);n=n.attr("map-panels-count");2<n&&(e=Math.max(o,e-1));var n=Math.max(o,a-n+1),i=Math.min(n,e);t.each(function(e,n){r(n).attr("show-floor-index",Math.min(i,a)),i++})},showObjective:function(e,n){var t="show-objective-";n.removeClassPrefix(t),n.addClass(t+e)},SVG_DIM:e}}(window.jQuery,(window,document)),R6MMainControls=function(c,m){function i(){return p.find(".selected").data("index")}function d(){var e=p.find("button");return{min:c(e[0]).data("index"),max:c(e[e.length-1]).data("index")}}function t(n){return function(){var e=g.val();1.6<e?n.addClass(M):e<.4?n.addClass(F):(n.removeClass(M),n.removeClass(F))}}function o(){g.trigger("input")}function r(){return h.val()}function n(e,n){return!!(n=e.find('option[value="'+n+'"]')).length&&(n.prop("selected",!0),!0)}function a(e){for(var n,t=k(e),o=m.getElementsByClassName("svgMap"),a=0;a<o.length;a++){var i=o[a].getSVGDocument();if(i)for(n=-2;n<5;n++){var r=i.getElementById(n+"-"+e);(r=-2==n?i.getElementById("bg-"+e):r)&&(r.style.display=t?"inline":"none")}}}function l(e){var n,t=d(),o=m.getElementsByClassName("svgMap"),a=e;2<(e=c("#map-panels-container").attr("map-panels-count"))&&(a=Math.max(t.min,a-1));for(var e=Math.max(t.min,t.max-e+1),i=Math.min(e,a),r=0;r<o.length;r++){var l=o[r].getSVGDocument();if(l)for(n=-1;n<5;n++){var s=l.getElementById("Floor "+n);s&&(s.style.display=n==i?"inline":"none")}i++}}var s,u,f,h=c("#map-control"),p=c("#floor-control"),g=c("#zoom-range"),x=c("#mmenu-link"),v=c("#menu-panel"),b="selected",M="zoomed-in-far",F="zoomed-out-far",E=[{short:"bmb",full:"Bomb"},{short:"sec",full:"Secure"},{short:"hst",full:"Hostage"},{short:"fh",full:"Floor hatch"},{short:"ch",full:"Ceiling hatch"},{short:"bw",full:"Breakable wall"},{short:"losf",full:"Line of sight floor"},{short:"sl",full:"Skylight"},{short:"dt",full:"Drone tunnel"},{short:"cam",full:"Security camera"},{short:"ld",full:"Ladder"},{short:"ip",full:"Insertion point"},{short:"txt",full:"Label"},{short:"cmp",full:"Compass"},{short:"lg",full:"Legend"}],_=function(e){e=p.find("[data-index='"+e+"']");return!!e.length&&(P(),e.addClass(b),e.trigger("click"),!0)},S=function(e){var n="Shortcut: {shortcut}";return n.replace("{shortcut}",0==e?"'0' or '~'":e)},k=function(e){return c("#option-"+e).is(":checked")},I=function(){return m.fullscreenEnabled||m.webkitFullscreenEnabled||m.webkitCancelFullScreen||m.mozFullScreenEnabled||m.msFullscreenEnabled},w=function(e){return n(h,e)},P=function(){p.find("."+b).removeClass(b)},y=function(t){p.on("click","button",function(e){var n="SPAN"==e.target.tagName?c(e.target).parent():c(e.target);P(),n.addClass(b),l(e.currentTarget.getAttribute("data-index")),t()})},C=function(e){var n;c(m).on("keydown",(n=e,function(e){e=e.which;48<=e&&e<=53?_(e-48)&&n():192==e&&_(0)&&n()}))},e=function(){var e;m.fullscreenElement||m.webkitFullscreenElement||m.webkitCurrentFullScreenElement||m.mozFullScreenElement||m.msFullscreenElement?m.exitFullscreen?m.exitFullscreen():m.webkitExitFullscreen?m.webkitExitFullscreen():m.webkitCancelFullScreen?m.webkitCancelFullScreen():m.mozCancelFullScreen?m.mozCancelFullScreen():m.msExitFullscreen&&m.msExitFullscreen():(e=m.documentElement).requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.webkitEnterFullscreen?e.webkitEnterFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},T=function(e){var n=c("#lock-container");1<e?n.show(600):n.hide(600)};return{getSelectedFloor:i,getMinMaxFloor:d,getFloorButtonsHTML:function(e){var n,t,o="",a=i();e.forEach(function(e){e.dontSelect||(n="",n+=e.default?b:"",t=S(e.index),o+='<button data-index="'+e.index+'" class="'+n+'" title="'+t+'">',o+='<span class="short">'+e.name.short+"</span>",o+='<span class="full">'+e.name.full+"</span>",o+="</button>")}),p.html(o),_(a)},setFloorsChangeEventAndHotkeys:function(e,n){y(e),C(n)},setSelectedFloor:_,setMapPanelsCountChangeEvent:function(t){s.on("change",function(e){var n=s.val();T(n),t(n)})},setSelectedMapPanel:function(e){e=n(s,e);return s.trigger("change"),e},getSelectedMap:r,createMapCombo:function(e){var n,t="",o=[],a=r();for(n in e)e.hasOwnProperty(n)&&o.push({key:n,name:e[n].name});o.sort(function(e,n){return e.name<n.name?-1:e.name>n.name?1:0}),o.forEach(function(e){t+='<option value="'+e.key+'">'+e.name+"</option>"}),h.html(t),w(a)},setMapChangeEvent:function(e){h.on("change",e)},setSelectedMap:w,getMenuHTML:function(){var e,n,t="";t+=(e="",e+='<div class="mmenu-custom-panel">',e+="<h2>r6calls.com</h2>",e+='<button id="menu-map-selection">Select a map</button>',e+="<br>",I()&&(e+='<button href="" id="full-screen">Full screen</button>',e+="<br>"),e+='<a class="menu-item" id="menu-about" href="about/about.html">About</a>',e+="</div>"),t+=(n="",n+='<div id="options-wrapper" class="mmenu-custom-panel">',n+="<h2>Options</h2>",n+='<div class="map-panels-count-control">',n+="<label>Number of floors to display:</label>",n+='<select id="map-pane-count">',n+='<option value="1">1 - Full</option>',n+='<option value="2">2 - Split</option>',n+='<option value="4">4 - Grid</option>',n+="</select>",n+='<div id="lock-container">',n+='<div class="checkbox-wrapper">',n+='<input type="checkbox" checked="checked" id="option-lfa">Lock floor alignment</input>',n+="</div>",n+="</div>",n+="</div>",n+="<label>Elements to display:</label>",n+='<div class="checkbox-wrapper">',E.forEach(function(e){n+='<div class="checkbox-item">',n+='<img class="legend-icon" src="./img/legend/'+e.short+'.png"><input type="checkbox" checked="checked" id="option-'+e.short+'">'+e.full+"</input><br>",n+="</div>"}),n+="</div>",n+="</div>"),t+='<div class="faded-logo"></div>',v.html(t),x.find(".menu-text").html("Menu"),s=c("#map-pane-count"),u=c("#full-screen"),f=c("#menu-map-selection")},setMenuFullScreenClickEvent:function(){u&&u.on("click",e)},setMenuSelectMapClickEvent:function(n,t){f.on("click",function(e){e.preventDefault(),n(),t()})},setMenuCheckboxOption:function(e,n){n="true"===n;c("#option-"+e).prop("checked",n)},setMenuCheckboxChangeEvent:function(n,t){c("#option-"+n).change(function(e){a(n),t(n,k(n))})},setLayerDisplay:a,setFoorDisplay:l,setMapsPositionAndSize:function(){for(var e=m.getElementsByClassName("svgMap"),n=0;n<e.length;n++){var t,o,a,i=e[n].getSVGDocument();i&&(t=-1*(a=i.getElementById("mainSVG")).getAttribute("height")/2,o=-1*a.getAttribute("width")/2,i=a.getAttribute("height"),a=a.getAttribute("width"),e[n].parentElement.style.top=t+"px",e[n].parentElement.style.left=o+"px",e[n].parentElement.style.height=i+"px",e[n].parentElement.style.width=a+"px",e[n].style.top=t+"px",e[n].style.left=o+"px",e[n].style.height=i+"px",e[n].style.width=a+"px")}},removeHidden:function(e){var n=m.getElementsByClassName("svgMap");for(e=0;e<n.length;e++)n[e].style.visibility="visible"},MAP_LAYERS:E,resetPan:function(e,n){n=n();e.panzoom("pan",-n.centerLeft*n.zoomValue,-n.centerTop*n.zoomValue)},disableZoom:function(e){e.panzoom("disable")},enableZoom:function(e){e.panzoom("enable")},isZoomed:function(){return 1!=g.val()},resetZoom:function(e,n){n=n();g.val(n.zoomValue),g.trigger("input")},setPanZoom:function(e,n){var a;e.panzoom({$zoomRange:g,minScale:.3,maxScale:2.5}),e.on("mousewheel",function(e){g.val(+g.val()+.06*e.deltaY),g.trigger("input")}),g.on("change",t(n)),g.on("input",t(n)),e.on("touchstart","a",function(e){c(this).addClass("hover")}),e.on("touchend","a",function(e){c(this).removeClass("hover"),this.click()}),e.on("panzoomchange",(a=e,function(t,e,o){k("lfa")&&a.each(function(e,n){n!==t.target&&c(n).panzoom("pan",o[4],o[5],{silent:!0})})})),e.on("panzoomend",o)}}}(window.jQuery,(window,document)),MIN_COLUMN_NUM=2,MAX_COLUMN_NUM=10,NATIVE_THUMB_IMG_WIDTH=495,NATIVE_THUMB_IMG_HEIGHT=278,NATIVE_THUMB_IMG_RATIO=NATIVE_THUMB_IMG_WIDTH/NATIVE_THUMB_IMG_HEIGHT,VIEWPORT_PADDING_HEIGHT=10,VIEWPORT_PADDING_WIDTH=15,MAP_LINK_TOTAL_BORDER_SIZE=2,MIN_MAP_LINK_WIDTH=100,THUMB_SCALE_ZOOMED_IN_FACTOR=1.25,R6MMainMapSelectionGrid=function(d,l){function s(e,l,s,c){var m={};return e.forEach(function(e){var n,t,o=Math.ceil(l/e),a=Math.floor(s/e),i=Math.floor(c/o),r=a/i;(!m.ratio||Math.abs(NATIVE_THUMB_IMG_RATIO-m.ratio)>Math.abs(NATIVE_THUMB_IMG_RATIO-r))&&MIN_MAP_LINK_WIDTH<=a&&(t=s,n=Math.max(Math.min(Math.floor(t/100),10),20),t=Math.round(n/2),d.extend(m,{_debugColumnCount:e,_debugRowCount:o,_debugAvailableWidth:s,_debugAvailableHeight:c,ratio:r,width:a-MAP_LINK_TOTAL_BORDER_SIZE-2*t,height:i-MAP_LINK_TOTAL_BORDER_SIZE-n,marginVertical:n,marginHorizontal:t}))}),m}function r(e,n,t){var o={height:d(l).height(),width:d(l).width()},a=t.height(),t=function(e){for(var n,t=[],o=MIN_COLUMN_NUM;o<=MAX_COLUMN_NUM;o++)(o<=2*(n=e%o)||o-n<3)&&t.push(o);return t}(i=n.length),i=s(t,i,o.width-VIEWPORT_PADDING_WIDTH,o.height-a-VIEWPORT_PADDING_HEIGHT),r=(o=i,Math.max(o.height/(NATIVE_THUMB_IMG_HEIGHT-1),o.width/(NATIVE_THUMB_IMG_WIDTH-1))),o=n.find(".spinner");e.css("padding-top",a+VIEWPORT_PADDING_HEIGHT+"px"),n.height(i.height),n.width(i.width),n.css("margin","0 "+i.marginHorizontal+"px "+i.marginVertical+"px "+i.marginHorizontal+"px"),o.css("background-size",Math.min(i.height,i.width)-20+"px"),c(n.find("div.image.thumb"),r),n.hover(function(e){c(d(e.target).closest("li").find("div.image.thumb"),r*THUMB_SCALE_ZOOMED_IN_FACTOR)},function(e){c(d(e.target).closest("li").find("div.image.thumb"),r)})}var c=function(e,n){e.css("-ms-transform","scale("+n+")"),e.css("-webkit-transform","scale("+n+")"),e.css("transform","scale("+n+")")};return{createMapSelectionGrid:function(e,n,t,o,a,i){n.text("Select a map"),e.html(function(e){var n,t=[],o="<ul>";for(n in e)e.hasOwnProperty(n)&&t.push({key:n,name:e[n].name,imgUrlPrefix:e[n].imgUrlPrefix});return t.sort(function(e,n){return e.name<n.name?-1:e.name>n.name?1:0}),t.forEach(function(e){o+='<li data-key="'+e.key+'">',o+='<a href="" class="'+e.key+'">',o+='<div class="wrapper absolute thumb"><div class="image thumb" style="background-image: url(./img/maps/'+e.imgUrlPrefix+"/"+e.imgUrlPrefix+'.webp);"></div></div>',o+='<div class="wrapper absolute spinner loading"><div>',o+="</div></div>",o+="<p>"+e.name+"</p>",o+="</a>",o+="</li>"}),o+="</ul>"}(o)),e.on("click","a",function(e){e.preventDefault(),a(d(e.target).closest("li").data("key"))}),e.on("click",i);i=function(){r(e,e.find("a"),t)};i(),d(l).on("resize",i),setTimeout(function(){e.addClass("enable-thumb-transition")},1)}}}(window.jQuery,window,document),PING_MARKER_RADIUS=10,MIN_PING_MARKER_RADIUS=7,MAX_PING_MARKER_RADIUS=16,PING_MARKER_BORDER_PERCENT=.2,MIN_PING_MARKER_BORDER=1,refreshPings=function(){},R6MMainDrawing=function(_){var S=function(e,n,t){var o=t.offset().left+t.width()/2,a=t.offset().top+t.height()/2,i=t.find(".map-main").panzoom("getMatrix"),r=parseInt(i[4]),t=parseInt(i[5]),i=i[0];return{x:Math.round((e-o-r)/i),y:Math.round((n-a-t)/i)}},k=function(e,n,t,o,a,i,r,l){e.attr("cx",i),e.attr("cy",r),n.attr("cx",i),n.attr("cy",r),t.attr("x1",i),t.attr("x2",i),o.attr("y1",r),o.attr("y2",r),(refreshPings=function(){_.each(a,function(e,n){var t=_(n),n=t.closest(".map-container").attr("show-floor-index");l&&l!=n?l<n?t.attr("transform","translate("+(i-9)+" "+(r-5)+"), rotate(0)"):t.attr("transform","translate("+(i+9)+" "+(r+5)+"), rotate(180)"):t.attr("transform","translate(-10000 -10000)")}),_.each(e,function(e,n){var t=_(n),n=t.closest(".map-container").attr("show-floor-index");l&&l!=n?t.addClass("other-floor"):t.removeClass("other-floor")})})(),e.addClass("highlight"),n.addClass("highlight"),t.addClass("highlight"),o.addClass("highlight"),setTimeout(function(){e.removeClass("highlight"),n.removeClass("highlight"),t.removeClass("highlight"),o.removeClass("highlight")},100)};return{setupMarkers:function(e,n,t){M=n,F="",F+='<svg class="svg-elements drawing-markers" style="width: '+(b=t).WIDTH+"px; left: -"+b.LEFT_OFFSET+"px; height: "+b.HEIGHT+"px; top: -"+b.TOP_OFFSET+'px;">',F+="<g>",F+='<line class="ping-marker vertical" x1="-9000" y1="35" x2="-10000" y2="'+(b.HEIGHT+35)+'" stroke-width="2"/>',F+='<line class="ping-marker horizontal" x1="-25" y1="-10000" x2="'+(b.WIDTH-25)+'" y2="-9000" stroke-width="2"/>',F+='<circle class="ping-marker accent" cx="-10000" cy="-10000" r="6" stroke-width="2"/>',F+='<circle class="ping-marker center" cx="-10000" cy="-10000" r="6" stroke-width="2"/>',F+='<polygon class="ping-marker other-floor" points="0,0 18,0 9,15.5884" stroke-width="2" transform="translate(-10000 -10000)"></polygon>',F+="</g>",F+="</svg>",M.html(F);var o,a,i,r,l,s,c,m,d,u,f,h,p,g,x,v=n.find(".ping-marker.center"),b=n.find(".ping-marker.accent"),M=n.find(".ping-marker.vertical"),F=n.find(".ping-marker.horizontal"),n=n.find(".ping-marker.other-floor"),E=(x=t,function(e){var n=_(e.target).closest(".map-container"),t=S(e.center.x,e.center.y,n),e=t.x,t=t.y,n=n.attr("show-floor-index");k(u,f,h,p,g,e+x.LEFT_OFFSET,t+x.TOP_OFFSET,n)}),t=function(){var e=_(m[0]).panzoom("getMatrix")[0],n=Math.round(PING_MARKER_RADIUS/e),n=Math.max(MIN_PING_MARKER_RADIUS,n),n=Math.min(MAX_PING_MARKER_RADIUS,n),e=Math.max(MIN_PING_MARKER_BORDER,Math.floor(n*PING_MARKER_BORDER_PERCENT));n-=e,s.attr("r",n),c.attr("r",2*n),s.attr("stroke-width",e),d.attr("stroke-width",e)},n=(o=s=u=v,a=c=f=b,i=h=M,r=p=F,l=d=g=n,function(){k(o,a,i,r,l,-1e4,-1e4)});(m=e).each(function(e,n){n=new Hammer(n);n.on("press",E),n.on("tap",E)}),v.on("click",n),e.on("panzoomzoom",t),t()},refreshPings:function(){refreshPings()}}}(window.jQuery,(window,document));!function(o,a,i,r,l,s,c,n){var u,m,d,f,h,p,g,t,x,v="show-map",b="show-map-selection-grid",M="/";o(function(){e();l.createMapPanels(m,4);F();E();_();s.createMapCombo(r.getMapData());S();k();s.setPanZoom(d,f);if(te()){I();oe();Y()}else{q();i.title="R6Calls.com"}setTimeout(function(){t.removeClass("loading")},10)});var e=function e(){m=o("#map-panels-container");g=o("#nav-logo");t=o("body");x=o("#main-nav")},F=function e(){u=o(".map-container");d=u.find(".map-main");f=d.find(".map-elements");h=o(".map-panel-label");p=d.find(".svg-wrapper.drawing-markers")},E=function e(){var n=o("#mmenu-link");s.getMenuHTML();o("#mmenu-menu").mmenu({offCanvas:{position:"right",pageSelector:"#mmenu-page"},extensions:["pagedim"],rtl:{use:false}});n.click(B)},_=function e(){n.createMapSelectionGrid(o("#map-selection-grid"),o("#map-selection-heading"),x,r.getMapData(),X,J)},S=function e(){s.setMapChangeEvent(G);s.setFloorsChangeEventAndHotkeys(O,Q);s.setMapPanelsCountChangeEvent(L);s.MAP_LAYERS.forEach(function(e){s.setMenuCheckboxChangeEvent(e.short,W)});s.setMenuCheckboxChangeEvent("lfa",Z);s.setMenuSelectMapClickEvent(q,R);s.setMenuFullScreenClickEvent();o(a).on("orientationchange",function(){s.resetPan(d,U);s.resetZoom(d,U)});g.on("click",$)},k=function e(){ne();s.MAP_LAYERS.forEach(function(e){ee(e.short)});ee("lfa")},I=function e(){var n=s.getSelectedMap(),t=r.getMapData();s.getFloorButtonsHTML(t[n].floors);l.getMapHTML(t[n],f,h);s.resetPan(d,U);s.resetZoom(d,U);Q();K(n);g.addClass("enabled");ie();var o=i.getElementsByClassName("svgMap"),a;for(a=0;a<o.length;a++)o[a].onload=function(){w();P();y();C()};c.setupMarkers(d,p,l.SVG_DIM)},w=function e(){s.setMapsPositionAndSize()},P=function e(){s.MAP_LAYERS.forEach(function(e){s.setLayerDisplay(e.short)})},y=function e(){s.setFoorDisplay(s.getSelectedFloor())},C=function e(){s.removeHidden()},T=function e(){return t.attr("loaded-map")},R=function e(){D().close()},A=function e(){return t.hasClass(v)},H=function e(){return a.location.hash.substr(1).split(M)},N=function e(){return o("body").attr("loaded-map")},D=function e(){return o("#mmenu-menu").data("mmenu")},U=function e(){var n={topLeft:{top:-180,left:-312},bottomRight:{top:180,left:312}};var t=n.bottomRight.left-n.topLeft.left,o=n.bottomRight.top-n.topLeft.top,a=Math.round(n.bottomRight.top-o/2),i=Math.round(n.topLeft.left+t/2),r=u.width(),l=u.height(),s=x.height(),c=Math.min(l*.1,s),m=Math.min(l*.1,s*2);r=r-c;l=l-m;var d={debugZoomWidth:t,debugZoomHeight:o,centerTop:a,centerLeft:i,debugPanelWidth:r,debugPanelHeight:l,debugPaddingWidth:c,debugPaddingHeight:m,zoomValue:Math.max(Math.min(1,r/t,l/o),.5)};return d},O=function e(){Q();ae();c.refreshPings()},G=function e(){I();ae()},L=function e(n){j(n);y()},B=function e(n){var t=D();n.preventDefault();t.open()},z=function e(n,t){try{localStorage.setItem(n,t)}catch(e){}},V=function e(){var n,t,o=a.location;if("pushState"in history)history.pushState("",i.title,o.pathname+o.search);else{n=i.body.scrollTop;t=i.body.scrollLeft;o.hash="";i.body.scrollTop=n;i.body.scrollLeft=t}},W=function e(n,t){z(n,t)},Z=function e(n,t){z(n,t);if(t)s.resetPan(d,U)},K=function e(n){t.attr("loaded-map",n)},j=function e(t){z("mappanelscount",t);m.attr("map-panels-count",t);o.each(d,function(e,n){if(e<t){o(n).css("display","block");s.enableZoom(o(n))}else{o(n).css("display","none");s.disableZoom(o(n))}});s.resetPan(d,U);s.resetZoom(d,U);Q()},q=function e(){t.removeClass(v);t.addClass(b);ae();ie()},Y=function e(){t.removeClass(b);t.addClass(v);ae();ie()},Q=function e(){var n=s.getMinMaxFloor();l.showFloor(s.getSelectedFloor(),m,u,n.min,n.max)},X=function e(n){if(s.setSelectedMap(n)){J();setTimeout(function(){I();Y()},1)}},$=function e(n){var t=D();n.preventDefault();if(A()){q();t.close()}else if(T()){Y();t.close()}},J=function e(){if(T())Y()},ee=function e(n){var t=localStorage.getItem(n);if(t!==null)s.setMenuCheckboxOption(n,t)},ne=function e(){var n=localStorage.getItem("mappanelscount");if(!n){var t=o(a);n=t.width()>1e3||t.height()>1e3?2:1}s.setSelectedMapPanel(n);j(n)},te=function e(){var n=H(),t=n[0];return s.setSelectedMap(t)},oe=function e(){var n=H(),t=n[1];if(s.setSelectedFloor(t))Q()},ae=function e(){if(A()){var n="";n+=""+s.getSelectedMap();n+=M+s.getSelectedFloor();a.location.hash=n}else V()},ie=function e(){i.title=A()?"R6Calls.com - {mapName}".replace("{mapName}",r.getMapData()[N()].name):"R6Calls.com - Select a map"}}(window.jQuery,window,document,R6MMainData,R6MMainRender,R6MMainControls,R6MMainDrawing,R6MMainMapSelectionGrid);
//# sourceMappingURL=main.min.js.map