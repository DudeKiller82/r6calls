{"version":3,"file":"./site/js/release.2.4.1/main.min.js.map","sources":["./dev/js/main/main.map-data.js","./dev/js/main/main.map-render.js","./dev/js/main/main.controls.js","./dev/js/main/main.select-maps.js","./dev/js/main/main.drawing.js","./dev/js/main/main.js"],"sourcesContent":["'use strict';\r\n\r\nvar R6MMainData = (function(undefined){\r\n  var floorTerms = {\r\n    subBasement: { full: 'Sub-Basement', short: 'SB'},\r\n    basement: { full: 'Basement', short: 'B' },\r\n    firstFloor: { full: '1st Floor', short: '1' },\r\n    secondFloor: { full: '2nd Floor', short: '2' },\r\n    thirdFloor: { full: '3rd Floor', short: '3' },\r\n    fourthFloor: { full: '4th Floor', short: '4' },\r\n    roof: { full: 'Roof', short: 'R' }\r\n  };\r\n\r\n  var getMapData = function getMapData() {\r\n    return {\r\n      bank: {\r\n        name: 'Bank',\r\n        imgUrlPrefix: 'bank',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      bartlett: {\r\n        name: 'Bartlett U.',\r\n        imgUrlPrefix: 'bartlett',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      border: {\r\n        name: 'Border',\r\n        imgUrlPrefix: 'border',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      chalet: {\r\n        name: 'Chalet',\r\n        imgUrlPrefix: 'chalet',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      club: {\r\n        name: 'Club House',\r\n        imgUrlPrefix: 'club-house',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      coastline: {\r\n        name: 'Coastline',\r\n        imgUrlPrefix: 'coastline',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      consulate: {\r\n        name: 'Consulate',\r\n        imgUrlPrefix: 'consulate',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      favela: {\r\n        name: 'Favela',\r\n        imgUrlPrefix: 'favela',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      fortress: {\r\n        name: 'Fortress',\r\n        imgUrlPrefix: 'fortress',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      hereford: {\r\n        name: 'Hereford',\r\n        imgUrlPrefix: 'hereford',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      house: {\r\n        name: 'House',\r\n        imgUrlPrefix: 'house',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      kafe: {\r\n        name: 'Kafe Dostoyevsky',\r\n        imgUrlPrefix: 'kafe',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      kanal: {\r\n        name: 'Kanal',\r\n        imgUrlPrefix: 'kanal',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: -1, name: floorTerms.subBasement },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      oregon: {\r\n        name: 'Oregon',\r\n        imgUrlPrefix: 'oregon',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      outback: {\r\n        name: 'Outback',\r\n        imgUrlPrefix: 'outback',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      plane: {\r\n        name: 'Plane',\r\n        imgUrlPrefix: 'plane',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      skyscraper: {\r\n        name: 'Skyscraper',\r\n        imgUrlPrefix: 'skyscraper',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      themepark: {\r\n        name: 'Theme Park',\r\n        imgUrlPrefix: 'themepark',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      tower: {\r\n        name: 'Tower',\r\n        imgUrlPrefix: 'tower',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      villa: {\r\n        name: 'Villa',\r\n        imgUrlPrefix: 'villa',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      yacht: {\r\n        name: 'Yacht',\r\n        imgUrlPrefix: 'yacht',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, top: -1077, left: -1915, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.fourthFloor },\r\n          { index: 5, name: floorTerms.roof }\r\n        ]\r\n      }\r\n    };\r\n  };\r\n\r\n  return  {\r\n    getMapData: getMapData\r\n  };\r\n})();\r\n","'use strict';\r\n\r\nvar R6MMainRender = (function($,window,document,undefined) {\r\n  var SVG_WIDTH = 2560,\r\n    SVG_HEIGHT = 1474,\r\n    SVG_DIM = {\r\n      WIDTH: SVG_WIDTH,\r\n      HEIGHT: SVG_HEIGHT,\r\n      TOP_OFFSET: (SVG_HEIGHT / 2) + 12,\r\n      LEFT_OFFSET: (SVG_WIDTH / 2) - 5\r\n    };\r\n\r\n  $.fn.removeClassPrefix = function(prefix) {\r\n    this.each(function(i, el) {\r\n      var classes = el.className.split(' ').filter(function(c) {\r\n        return c.lastIndexOf(prefix, 0) !== 0;\r\n      });\r\n\r\n      el.className = $.trim(classes.join(' '));\r\n    });\r\n    return this;\r\n  };\r\n\r\n  var IMG_URL = 'img/',\r\n    FLOOR_CSS_TEXT = {\r\n      '-1': 'neg-one', // bare -1 doesn't lint, but this should still work\r\n      0: 'zero',\r\n      1: 'one',\r\n      2: 'two',\r\n      3: 'three',\r\n      4: 'four',\r\n      5: 'five'\r\n    };\r\n\r\n  var getMaxFloorIndexHtml = function getMaxFloorIndexHtml($mapWrappers, floors, imgUrlPrefix) {\r\n    /** Generates the HTML for the given floors.\r\n     *\r\n     * While waiting for the images of the floors to load, a loading spinner is added to the\r\n     * $mapWrappers.\r\n     *\r\n     * @param $mapWrappers A reference to the DOM element that will contain the floors.\r\n     *  A loading spinner is added to this element when generation starts, and is removed\r\n     *  when all the floor images are loaded.\r\n     *\r\n     * @param floors A list of objects, each containing its index and whether it's a background\r\n     *  floor, along with items that define the style of the floor.\r\n     *\r\n     * @param imgUrlPrefix A string defining the prefix for this map's floor images, which is\r\n     *  assumed to be the folder the images are in, as well as the prefix of the actual images'\r\n     *  filenames.\r\n     *\r\n     * @returns An HTML string, which is every floor as an img, each with its styles, classes\r\n     *  and image source.\r\n     */\r\n    var html = '',\r\n      prefix,\r\n      imgSrc,\r\n      inlineStyle,\r\n      classes,\r\n      deferrs = [];\r\n\r\n    $mapWrappers.addClass('loading');\r\n\r\n    var currentDeferr = $.Deferred();\r\n\r\n    prefix = imgUrlPrefix;\r\n    imgSrc = IMG_URL + prefix + '/' + prefix + '.svg';\r\n    inlineStyle = getPositionStyle(floors[0]);\r\n    classes = 'background';\r\n    //              https://greensock.com/forums/topic/11187-accessing-svg-paths-in-external-file/\r\n    // html += '<img src=\"' + imgSrc + '\" style=\"' + inlineStyle + '\" class=\"' + classes + '\"></img>';\r\n    html += '<div style=\"' + inlineStyle + '\" class=\"' + classes + '\"></object>';\r\n    // html += '<object class=\"mapSVG\" data=\"' + imgSrc + '\" type=\"image/svg+xml\"></object>';\r\n    html += '<img class=\"inject-me\" src=\"' + imgSrc + '\"></img>';\r\n    // Creates a ghost image for every floor, which removes itself when it's loaded, and then\r\n    // resolves the deferrer for this floor.\r\n    // The \"ghost image\" is just asking to load the bg image another time, and since this will\r\n    // just load from cache, it shouldnt impact performance too much.\r\n    // This allows us to remove the loading spinner when all the deferrers are resolved, as\r\n    // they all resolve once all the images load in.\r\n    $('<img/>').attr('src', imgSrc).load(function() {\r\n      $(this).remove(); // prevent memory leaks\r\n      currentDeferr.resolve();\r\n    });\r\n    deferrs.push(currentDeferr);\r\n\r\n    $.when.apply($, deferrs).then(function() {\r\n      $mapWrappers.removeClass('loading');\r\n    });\r\n\r\n    return html;\r\n  };\r\n\r\n  var getPanelLabelsHtml = function getPanelLabelsHtml(floors) {\r\n    var html = '',\r\n      cssClass = '';\r\n\r\n    floors.forEach(function(floor) {\r\n      // allows to have a bg image that can't be selected as a \"floor\"\r\n      if (floor.dontSelect) {\r\n        return;\r\n      }\r\n      cssClass = FLOOR_CSS_TEXT[floor.index];\r\n      html += '<span class=\"' + cssClass + '\">' + floor.name.full + '</span>';\r\n    });\r\n    return html;\r\n  };\r\n\r\n  var getPositionStyle = function getPositionStyle(element) {\r\n    var styleString = '';\r\n\r\n    if ('top' in element) {\r\n      styleString += 'top: ' + element.top + 'px;';\r\n    }\r\n    if ('bottom' in element) {\r\n      styleString += 'bottom: ' + element.bottom + 'px;';\r\n    }\r\n    if ('right' in element) {\r\n      styleString += 'right: ' + element.right + 'px;';\r\n    }\r\n    if ('left' in element) {\r\n      styleString += 'left: ' + element.left + 'px;';\r\n    }\r\n    if ('height' in element) {\r\n      styleString += 'height: ' + element.height + 'px;';\r\n    }\r\n    if ('width' in element) {\r\n      styleString += 'width: ' + element.width + 'px;';\r\n    }\r\n    if ('rotate' in element) {\r\n      styleString += 'transform: rotate(' + element.rotate + 'deg);';\r\n    }\r\n    return styleString;\r\n  };\r\n\r\n  var renderMap = function renderMap(mapData, $mapWrappers, $mapElements, $mapPanelLabels) {\r\n    var html = '';\r\n\r\n    html += getMaxFloorIndexHtml($mapWrappers, mapData.floors, mapData.imgUrlPrefix);\r\n\r\n    $mapElements.html(html);\r\n      // Elements to inject\r\n    var mySVGsToInject = document.querySelectorAll('img.inject-me');\r\n\r\n    // Do the injection\r\n    SVGInjector(mySVGsToInject);\r\n    $mapPanelLabels.html(getPanelLabelsHtml(mapData.floors));\r\n  };\r\n\r\n  var setupMapPanels = function setupMapPanels($mapPanelWrappers, numPanels) {\r\n    var html;\r\n\r\n    for (var x = 0; x < numPanels; x++) {\r\n      html = '';\r\n      html += '<div class=\"map-wrapper\">';\r\n      html += '<div class=\"helper-border vertical\"></div>';\r\n      html += '<div class=\"helper-border horizontal\"></div>';\r\n      html += '<p class=\"map-panel-label\"></p>';\r\n      html += '<div class=\"map-main\">';\r\n      html += '<div class=\"center-helper\">';\r\n      html += '<div class=\"map-elements\"></div>';\r\n      html += '<div class=\"svg-wrapper drawing-markers\"></div>';\r\n      html += '<div class=\"svg-wrapper map\"></div>';\r\n      html += '</div>'; // end center-helper\r\n      html += '</div>'; // end map-main\r\n      html += '</div>'; // end map-wrapper\r\n      $mapPanelWrappers.append(html);\r\n    }\r\n  };\r\n\r\n  var showFloor = function showFloor(\r\n    selectedFloorIndex,\r\n    $mapPanelWrappers,\r\n    $mapWrappers,\r\n    minFloorIndex,\r\n    maxFloorIndex\r\n  ) {\r\n    $mapPanelWrappers.attr('selected-floor-index', selectedFloorIndex);\r\n    var numPanels = $mapPanelWrappers.attr('map-panel-count');\r\n\r\n    if (numPanels > 2)  {\r\n      selectedFloorIndex = Math.max(minFloorIndex, selectedFloorIndex - 1);\r\n    }\r\n    var tempMinIndex = Math.max(minFloorIndex, maxFloorIndex - numPanels + 1),\r\n      startingIndex = Math.min(tempMinIndex, selectedFloorIndex);\r\n\r\n    $mapWrappers.each(function(index, map) {\r\n      $(map).attr('show-floor-index', Math.min(startingIndex, maxFloorIndex));\r\n      startingIndex++;\r\n    });\r\n  };\r\n\r\n  var showObjective = function showObjective(objective, $mapElements) {\r\n    var objectivePrefix = 'show-objective-';\r\n\r\n    $mapElements.removeClassPrefix(objectivePrefix);\r\n    $mapElements.addClass(objectivePrefix + objective);\r\n  };\r\n\r\n  return  {\r\n    renderMap: renderMap,\r\n    setupMapPanels: setupMapPanels,\r\n    showFloor: showFloor,\r\n    showObjective: showObjective,\r\n    SVG_DIM: SVG_DIM\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\nvar R6MMainControls = (function($, window, document, undefined) {\r\n  var $mapControl = $('#map-control'),\r\n    $objectiveControl = $('#objective-control'),\r\n    $floorControl = $('#floor-control'),\r\n    $zoomControl = $('#zoom-range'),\r\n    $menuControl = $('#mmenu-link'),\r\n    $mapPanelCountControl,\r\n    $fullScreenControl,\r\n    $menuSelectMapsControl,\r\n    $menuPanel = $('#menu-panel'),\r\n    SELECTED_CLASS = 'selected',\r\n    ZOOMED_IN_FAR_CLASS = 'zoomed-in-far',\r\n    ZOOMED_OUT_FAR_CLASS = 'zoomed-out-far',\r\n    CSS_TRANSITION_MS = 1800, // currently in highlighted-item mixin for .highlighted-item-in-transition\r\n    MAP_LAYER = [\r\n      {short: 'bmb', full: 'Bomb'},\r\n      {short: 'sec', full: 'Secure'},\r\n      {short: 'hst', full: 'Hostage'},\r\n      {short: 'fh', full: 'Floor hatch'},\r\n      {short: 'ch', full: 'Ceiling hatch'},\r\n      {short: 'bw', full: 'Breakable wall'},\r\n      {short: 'losw', full: 'Line of sight or half wall'},\r\n      {short: 'dt', full: 'Drone tunnel'},\r\n      {short: 'losf', full: 'Line of sight floor'},\r\n      {short: 'ip', full: 'Insertion point'},\r\n      {short: 'cam', full: 'Security camera'},\r\n      {short: 'sl', full: 'Skylight'},\r\n      {short: 'lad', full: 'Ladder'},\r\n      {short: 'cmp', full: 'Compass'}\r\n    ];\r\n\r\n  var disableFullScreen = function disableFullScreen() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    } else if (document.webkitCancelFullScreen) {\r\n      document.webkitCancelFullScreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.msExitFullscreen) {\r\n      document.msExitFullscreen();\r\n    }\r\n  };\r\n\r\n  var enableFullScreen = function enableFunctionScreen() {\r\n    var rootEl = document.documentElement;\r\n\r\n    if (rootEl.requestFullscreen) {\r\n      rootEl.requestFullscreen();\r\n    } else if (rootEl.webkitRequestFullscreen) {\r\n      rootEl.webkitRequestFullscreen();\r\n    } else if (rootEl.webkitEnterFullscreen) {\r\n      rootEl.webkitEnterFullscreen();\r\n    } else if (rootEl.mozRequestFullScreen) {\r\n      rootEl.mozRequestFullScreen();\r\n    } else if (rootEl.msRequestFullscreen) {\r\n      rootEl.msRequestFullscreen();\r\n    }\r\n  };\r\n\r\n  var floorsGetCurrentIndex = function floorsGetCurrentIndex() {\r\n    return $floorControl.find('.selected').data('index');\r\n  };\r\n\r\n  var floorsGetMinAndMaxIndex = function floorsGetMinAndMaxIndex() { // TO DO CHANGE TO MAX FLOOR INDEX\r\n    var $floorInputs = $floorControl.find('button');\r\n\r\n    return {\r\n      min: $($floorInputs[0]).data('index'),\r\n      max: $($floorInputs[$floorInputs.length - 1]).data('index')\r\n    };\r\n  };\r\n\r\n  var floorsPopulate = function floorsPopulate(floors) {\r\n    var buttonsAsString = '',\r\n      classes = '',\r\n      tooltip = '',\r\n      initalFloor = floorsGetCurrentIndex();\r\n\r\n    floors.forEach(function(floor) {\r\n      // allows to have a bg image that can't be selected as a \"floor\"\r\n      if (floor.dontSelect) {\r\n        return;\r\n      }\r\n      classes = '';\r\n      classes += (floor.default) ? SELECTED_CLASS : '';\r\n      tooltip = getFloorTooltip(floor.index);\r\n      buttonsAsString += '<button data-index=\"' + floor.index + '\" class=\"' + classes + '\" title=\"' + tooltip + '\">';\r\n      buttonsAsString += '<span class=\"short\">' + floor.name.short + '</span>';\r\n      buttonsAsString += '<span class=\"full\">' + floor.name.full + '</span>';\r\n      buttonsAsString += '</button>';\r\n    });\r\n    $floorControl.html(buttonsAsString);\r\n    floorsTrySelect(initalFloor);\r\n  };\r\n\r\n  var floorsSetup = function floorsSetup(handleChangeCallback, showSelectedFloorFn) {\r\n    setupFloorChangeEvent(handleChangeCallback);\r\n    setupFloorHotkeys(showSelectedFloorFn);\r\n  };\r\n\r\n  var floorsTrySelect = function floorsTrySelect(floorIndex) {\r\n    var $selectedFloor = $floorControl.find(\"[data-index='\" + floorIndex + \"']\");\r\n\r\n    if ($selectedFloor.length) {\r\n      resetSelectedFloor();\r\n      $selectedFloor.addClass(SELECTED_CLASS);\r\n      $selectedFloor.trigger('click');\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  var getFloorTooltip = function getFloorTooltip(floorIndex) {\r\n    var shortcutTip = 'Shortcut: {shortcut}';\r\n\r\n    if (floorIndex == 0) {\r\n      return shortcutTip.replace('{shortcut}',\"'0' or '~'\");\r\n    } else {\r\n      return shortcutTip.replace('{shortcut}',floorIndex);\r\n    }\r\n  };\r\n\r\n  var getHandleHotkeyFn = function getHandleHotkeyFn(showSelectedFloorFn) {\r\n    return function handleHotKey(e) {\r\n      var keyCode = e.which;\r\n      var keyVal = e.key;\r\n\r\n      if (keyCode >= 48 && keyCode <= 53) {  // '0' through '1'\r\n        if (floorsTrySelect(keyCode - 48)) {\r\n          showSelectedFloorFn();\r\n        }\r\n      } else if (keyCode == 192) { // '`'\r\n        if (floorsTrySelect(0)) {\r\n          showSelectedFloorFn();\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n\r\n  var getHandlePanZoomChangeFn = function getHandlePanZoomChangeFn($mapMains) {\r\n    return function handlePanZoomChange(event, panzoom, transform) {\r\n      if (getDisplayValue('lp')) {\r\n        $mapMains.each(function(index, map) {\r\n          if (map !== event.target) {\r\n            $(map).panzoom('pan', transform[4], transform[5], {silent: true});\r\n          }\r\n        });\r\n      }\r\n    };\r\n  };\r\n\r\n  var getHandleZoomChangeFn = function getHandleZoomChangeFn($mapElements) {\r\n    return function handleZoomChange() {\r\n      var zoomVal = $zoomControl.val();\r\n\r\n      if ( zoomVal > 1.6) {\r\n        $mapElements.addClass(ZOOMED_IN_FAR_CLASS);\r\n      } else if ( zoomVal < 0.4 ) {\r\n        $mapElements.addClass(ZOOMED_OUT_FAR_CLASS);\r\n      } else {\r\n        $mapElements.removeClass(ZOOMED_IN_FAR_CLASS);\r\n        $mapElements.removeClass(ZOOMED_OUT_FAR_CLASS);\r\n      }\r\n    };\r\n  };\r\n\r\n  var getDisplayValue = function getDisplayValue(key) {\r\n    return $('#option-' + key).is(':checked');\r\n  };\r\n\r\n  var getMenuOptionsHtml = function getMenuOptionsHtml() {\r\n    var html = '';\r\n\r\n    html += '<div id=\"options-wrapper\" class=\"mmenu-custom-panel\">';\r\n    html += '<h2>Options</h2>';\r\n\r\n    html += '<div class=\"map-panel-count-control\">';\r\n    html += '<label>Number of floors to display</label>';\r\n    html += '<select id=\"map-pane-count\">';\r\n    html += '<option value=\"1\">1 - Full</option>';\r\n    html += '<option value=\"2\">2 - Split</option>';\r\n    html += '<option value=\"4\">4 - Grid</option>';\r\n    html += '</select>';\r\n\r\n    html += '<div id=\"lock-wrapper\">';\r\n    html += '<div class=\"checkbox-wrapper\">';\r\n    html += '<input type=\"checkbox\" checked=\"checked\" id=\"option-lp\">Lock panning</input>';\r\n    html += '</div>';\r\n    html += '</div>';\r\n\r\n    html += '</div>';\r\n\r\n    html += '<label>Elements to display</label>';\r\n    html += '<div class=\"checkbox-wrapper\">';\r\n    MAP_LAYER.forEach(function(layer) {\r\n      html += '<input type=\"checkbox\" checked=\"checked\" id=\"option-' + layer.short + '\">' + layer.full + '</input><br>';\r\n    });\r\n    html += '</div>';\r\n\r\n    html += '</div>';\r\n\r\n    return html;\r\n  };\r\n\r\n  var getMenuR6MapsHtml = function getMenuR6MapsHtml() {\r\n    var html = '',\r\n      legendItems,\r\n      CSS_ABBREV = 'legend-';\r\n\r\n    html += '<div class=\"mmenu-custom-panel\">';\r\n    html += '<h2>r6calls.com</h2>';\r\n    html += '<button id=\"menu-select-maps\">Select a map</button>';\r\n    html += '<a class=\"menu-item\" id=\"menu-about\" href=\"about/about.html\">About</a>';\r\n    if (isFullScreenAvailable()) {\r\n      html += '<button href=\"\" id=\"full-screen\">Full screen</button>';\r\n    }\r\n    legendItems = [\r\n      { class: CSS_ABBREV + 'floor-hatch', description: 'Floor hatch' },\r\n      { class: CSS_ABBREV + 'ceiling-hatch', description: 'Ceiling hatch' },\r\n      { class: CSS_ABBREV + 'breakable-walls', description: 'Breakable wall' },\r\n      { class: CSS_ABBREV + 'line-of-sight-walls', description: 'Line of sight or half wall' },\r\n      { class: CSS_ABBREV + 'drone-tunnels', description: 'Drone tunnel' },\r\n      { class: CSS_ABBREV + 'lineof-sight-floors', description: 'Line of sight floor' },\r\n      { class: CSS_ABBREV + 'insertion-point', description: 'Insertion point' },\r\n      { class: CSS_ABBREV + 'skylight', description: 'Skylight' },\r\n      { class: CSS_ABBREV + 'bomb', description: 'Bomb site' },\r\n      { class: CSS_ABBREV + 'security-camera', description: 'Security camera' },\r\n      { class: CSS_ABBREV + 'secure', description: 'Secure site' },\r\n      { class: CSS_ABBREV + 'ladder', description: 'Ladder' },\r\n      { class: CSS_ABBREV + 'hostage', description: 'Hostage site' }\r\n    ];\r\n    html += '<label>Legend</label>';\r\n    html += '<ul id=\"legend\"; style=\"height: 217px;width: 462px; position: relative\">';\r\n    legendItems.forEach(function(item) {\r\n      html += '<li class=\"' + item.class + '\">' + item.description + '</li>';\r\n    });\r\n    html += '</ul>';\r\n\r\n    html += '</div>';\r\n    return html;\r\n  };\r\n\r\n  var handlePanZoomEnd = function handlePanZoomEnd() {\r\n    $zoomControl.trigger('input');\r\n  };\r\n\r\n  var highlightControl = function highlightControl($el) {\r\n    $el.addClass('highlighted-item');\r\n  };\r\n\r\n  var isCurrentlyFullScreen = function isCurrentlyFullScreen() {\r\n    return (\r\n      document.fullscreenElement ||\r\n      document.webkitFullscreenElement ||\r\n      document.webkitCurrentFullScreenElement ||\r\n      document.mozFullScreenElement ||\r\n      document.msFullscreenElement\r\n    );\r\n  };\r\n\r\n  var isFullScreenAvailable = function isFullScreenAvailable() {\r\n    return (\r\n      document.fullscreenEnabled ||\r\n      document.webkitFullscreenEnabled ||\r\n      document.webkitCancelFullScreen ||\r\n      document.mozFullScreenEnabled ||\r\n      document.msFullscreenEnabled\r\n    );\r\n  };\r\n\r\n  var mapsSetupChangeEvent = function mapsSetupChangeEvent(callback) {\r\n    $mapControl.on('change', callback);\r\n  };\r\n\r\n  var mapPanelsSetupChangeEvent = function mapPanelsSetupChangeEvent(callback) {\r\n    $mapPanelCountControl.on('change', function(event) {\r\n      var panelCount = $mapPanelCountControl.val();\r\n\r\n      tryShowLockControls(panelCount);\r\n      callback(panelCount);\r\n    });\r\n  };\r\n\r\n  var mapsGetCurrentlySelected = function mapsGetCurrentlySelected() {\r\n    return $mapControl.val();\r\n  };\r\n\r\n  var mapsPopulateOptions = function mapsPopulateOptions(mapData) {\r\n    var optionsAsString = '',\r\n      maps = [],\r\n      currentMap = mapsGetCurrentlySelected();\r\n\r\n    for (var mapKey in mapData) {\r\n      if (mapData.hasOwnProperty(mapKey)) {\r\n        maps.push({ key: mapKey, name: mapData[mapKey].name });\r\n      }\r\n    }\r\n\r\n    maps.sort(function(a,b) {\r\n      if (a.name < b.name) {\r\n        return -1;\r\n      }\r\n      if (a.name > b.name) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n    maps.forEach(function(map) {\r\n      optionsAsString += '<option value=\"' + map.key + '\">' + map.name + '</option>';\r\n    });\r\n\r\n    $mapControl.html(optionsAsString);\r\n    mapsTrySelect(currentMap);\r\n  };\r\n\r\n  var mapsTrySelect = function mapsTrySelect(map) {\r\n    return R6MHelpers.trySelectOption($mapControl, map);\r\n  };\r\n\r\n  var menuSetup = function menuSetup() {\r\n    var html = '';\r\n\r\n    html += getMenuR6MapsHtml();\r\n    html += getMenuOptionsHtml();\r\n    html += '<div class=\"faded-logo\"></div>';\r\n    $menuPanel.html(html);\r\n\r\n    $menuControl.find('.menu-text').html('Menu');\r\n    $mapPanelCountControl = $('#map-pane-count');\r\n    $fullScreenControl = $('#full-screen');\r\n    $menuSelectMapsControl = $('#menu-select-maps');\r\n  };\r\n\r\n  var menuSetupFullScreen = function menuSetupFullScreen() {\r\n    if ($fullScreenControl) {\r\n      $fullScreenControl.on('click', toggleFullScreen);\r\n    }\r\n  };\r\n\r\n  var menuSetupSelectMaps = function menuSetupSelectMaps(\r\n    showSelectMapCallback,\r\n    closeMenuCallback\r\n  ) {\r\n    $menuSelectMapsControl.on('click', function(event) {\r\n      event.preventDefault();\r\n      showSelectMapCallback();\r\n      closeMenuCallback();\r\n    });\r\n  };\r\n\r\n  var panReset = function panReset($mapMains, getResetDimensions) {\r\n    var resetDimensions = getResetDimensions();\r\n\r\n    $mapMains.panzoom(\r\n      'pan',\r\n      -resetDimensions.centerLeft * resetDimensions.zoomValue,\r\n      -resetDimensions.centerTop * resetDimensions.zoomValue\r\n    );\r\n  };\r\n\r\n  var setLayerDisplay = function setLayerDisplay(key) {\r\n    var visible = getDisplayValue(key),\r\n      x = document.getElementsByClassName(key),\r\n      i;\r\n    var svgObjects = document.getElementsByClassName('mapSVG');\r\n    var layer = document.getElementById('layer2');\r\n\r\n    for (i = 0; i < svgObjects.length; i++) {\r\n      var svgObject = svgObjects[i];\r\n\r\n      if (svgObject) {\r\n        var svgDoc = svgObject.getSVGDocument();\r\n\r\n        // svgDoc = svgObject.contentDocument;\r\n        if (svgDoc) {\r\n          var rect = svgDoc.getElementById('layer5');\r\n\r\n          if (rect) {\r\n            rect.setAttribute('fill', 'green');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < x.length; i++) {\r\n      if (visible) {\r\n        x[i].hidden = false;\r\n      } else {\r\n        x[i].hidden = true;\r\n      }\r\n    }\r\n  };\r\n\r\n  var setMenuOption = function setMenuOption(key, isChecked) {\r\n    var boolValue = (isChecked === 'true') ? true : false;\r\n\r\n    setLayerDisplay(key);\r\n    $('#option-' + key).prop('checked', boolValue);\r\n  };\r\n\r\n  var setupMenuOptionChangeEvent = function setupMenuOptionChangeEvent(key, callback) {\r\n    $('#option-' + key).change(function(e) {\r\n      setLayerDisplay(key);\r\n      callback(key, getDisplayValue(key));\r\n    });\r\n  };\r\n\r\n  var resetSelectedFloor = function resetSelectedFloor() {\r\n    $floorControl.find('.' + SELECTED_CLASS + '').removeClass(SELECTED_CLASS);\r\n  };\r\n\r\n  var setupFloorChangeEvent = function setupFloorChangeEvent(callback) {\r\n    $floorControl.on('click', 'button', function(e) {\r\n      var floorButton =  (e.target.tagName == 'SPAN')\r\n        ? $(e.target).parent()\r\n        : $(e.target);\r\n\r\n      resetSelectedFloor();\r\n      floorButton.addClass(SELECTED_CLASS);\r\n      callback();\r\n    });\r\n  };\r\n\r\n  var setupFloorHotkeys = function setupFloorHotkeys(showSelectedFloorFn) {\r\n    $(document).on('keydown', getHandleHotkeyFn(showSelectedFloorFn));\r\n  };\r\n\r\n  var setupPanZoom = function setupPanZoom($mapMains, $mapElements) {\r\n    $mapMains.panzoom({\r\n      $zoomRange: $zoomControl,\r\n      minScale: 0.3,\r\n      maxScale: 2.5\r\n    });\r\n\r\n    $mapMains.on('mousewheel', function(event) {\r\n      $zoomControl.val(+$zoomControl.val() + (event.deltaY * 0.06));\r\n      $zoomControl.trigger('input');\r\n      //$zoomControl.trigger('change'); // todo: needed??\r\n    });\r\n\r\n    $zoomControl.on('change', getHandleZoomChangeFn($mapElements));\r\n    $zoomControl.on('input', getHandleZoomChangeFn($mapElements));\r\n\r\n    // camera links were not working on touch devices:\r\n    $mapMains.on('touchstart','a', function(e) {\r\n      $(this).addClass('hover');\r\n    });\r\n\r\n    $mapMains.on('touchend','a', function(e) {\r\n      $(this).removeClass('hover');\r\n      this.click();\r\n    });\r\n\r\n    $mapMains.on('panzoomchange', getHandlePanZoomChangeFn($mapMains));\r\n    $mapMains.on('panzoomend', handlePanZoomEnd);\r\n  };\r\n\r\n  var toggleFullScreen = function toggleFullScreen() {\r\n    if (isCurrentlyFullScreen()) {\r\n      disableFullScreen();\r\n    } else {\r\n      enableFullScreen();\r\n    }\r\n  };\r\n\r\n  var mapPanelsTrySelect = function mapPanelsTrySelect(number) {\r\n    var result = R6MHelpers.trySelectOption($mapPanelCountControl, number);\r\n\r\n    $mapPanelCountControl.trigger('change');\r\n    return result;\r\n  };\r\n\r\n  var objectivesGetCurrentlySelected = function objectivesGetCurrentlySelected() {\r\n    return $objectiveControl.val();\r\n  };\r\n\r\n  var objectivesPopulateOptions = function objectivesPopulateOptions(objectives) {\r\n    var options = '',\r\n      initialObjective = objectivesGetCurrentlySelected();\r\n\r\n    options += '<option value=\"bomb\">Bomb</option>';\r\n    options += '<option value=\"hostage\">Hostage</option>';\r\n    options += '<option value=\"secure\">Secure</option>';\r\n    options += '<option value=\"all\">Show All</option>';\r\n    $objectiveControl.html(options);\r\n    objectivesTrySelect(initialObjective);\r\n  };\r\n\r\n  var objectivesSetupChangeEvent = function objectivesSetupChangeEvent(callback) {\r\n    $objectiveControl.on('change', callback);\r\n  };\r\n\r\n  var objectivesTrySelect = function objectivesTrySelect(objective) {\r\n    return R6MHelpers.trySelectOption($objectiveControl, objective);\r\n  };\r\n\r\n  var removeLatestUpdateHighlight = function removeLatestUpdateHighlight(initialDelayMs) {\r\n    unhighlightControl($('#menu-latest-updates'), initialDelayMs);\r\n  };\r\n\r\n  var tryShowLockControls = function tryShowLockControls(numberPanels) {\r\n    var $lockWrapper = $('#lock-wrapper');\r\n\r\n    if (numberPanels > 1) {\r\n      $lockWrapper.show(600);\r\n    } else {\r\n      $lockWrapper.hide(600);\r\n    }\r\n  };\r\n\r\n  var unhighlightControl = function unhighlightControl($el, initialDelayMs) {\r\n    if ($el.hasClass('highlighted-item')) {\r\n      $el.addClass('highlighted-item-in-transition');\r\n      setTimeout(function() {\r\n        $el.removeClass('highlighted-item');\r\n\r\n        setTimeout(function() {\r\n          $el.removeClass('highlighted-item-in-transition');\r\n        }, CSS_TRANSITION_MS);\r\n      }, initialDelayMs);\r\n    }\r\n  };\r\n\r\n  var zoomDisable = function zoomDisable($mapElements) {\r\n    $mapElements.panzoom('disable');\r\n  };\r\n\r\n  var zoomEnable = function zoomEnable($mapElements) {\r\n    $mapElements.panzoom('enable');\r\n  };\r\n\r\n  var zoomIsZoomed = function zoomIsZoomed() {\r\n    return ($zoomControl.val() != 1);\r\n  };\r\n\r\n  var zoomReset = function zoomReset($mapMains, getResetDimensions) {\r\n    var resetDimensions = getResetDimensions();\r\n\r\n    $zoomControl.val(resetDimensions.zoomValue);\r\n    $zoomControl.trigger('input');\r\n  };\r\n\r\n  return  {\r\n    floors: {\r\n      get: floorsGetCurrentIndex,\r\n      getMinMaxIndex: floorsGetMinAndMaxIndex,\r\n      populate: floorsPopulate,\r\n      setup: floorsSetup,\r\n      trySelect: floorsTrySelect\r\n    },\r\n    mapPanels: {\r\n      setup: mapPanelsSetupChangeEvent,\r\n      trySelect: mapPanelsTrySelect\r\n    },\r\n    maps: {\r\n      get: mapsGetCurrentlySelected,\r\n      populate: mapsPopulateOptions,\r\n      setup: mapsSetupChangeEvent,\r\n      trySelect: mapsTrySelect\r\n    },\r\n    menu: {\r\n      setup: menuSetup,\r\n      setupFullScreen: menuSetupFullScreen,\r\n      setupSelectMaps: menuSetupSelectMaps,\r\n      setMenuOption: setMenuOption,\r\n      setupMenuOptionChangeEvent: setupMenuOptionChangeEvent\r\n    },\r\n    display: {\r\n      setLayerDisplay: setLayerDisplay,\r\n      MAP_LAYER: MAP_LAYER\r\n    },\r\n    objectives: {\r\n      get: objectivesGetCurrentlySelected,\r\n      populate: objectivesPopulateOptions,\r\n      setup: objectivesSetupChangeEvent,\r\n      trySelect: objectivesTrySelect\r\n    },\r\n    pan: {\r\n      reset: panReset\r\n    },\r\n    zoom: {\r\n      disable: zoomDisable,\r\n      enable: zoomEnable,\r\n      isZoomed: zoomIsZoomed,\r\n      reset: zoomReset\r\n    },\r\n    highlightControl: highlightControl,\r\n    removeLatestUpdateHighlight: removeLatestUpdateHighlight,\r\n    setupPanZoom: setupPanZoom,\r\n    unhighlightControl: unhighlightControl\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\nvar MIN_COLUMN_NUM = 2,\r\n  MAX_COLUMN_NUM = 10,\r\n  NATIVE_THUMB_IMG_WIDTH = 495,\r\n  NATIVE_THUMB_IMG_HEIGHT = 278,\r\n  NATIVE_THUMB_IMG_RATIO = NATIVE_THUMB_IMG_WIDTH / NATIVE_THUMB_IMG_HEIGHT,\r\n  VIEWPORT_PADDING_HEIGHT = 10,\r\n  VIEWPORT_PADDING_WIDTH = 15,\r\n  MAP_LINK_TOTAL_BORDER_SIZE = 2,\r\n  MIN_MAP_LINK_WIDTH = 100,\r\n  THUMB_SCALE_ZOOMED_IN_FACTOR = 1.25;\r\n\r\nvar R6MMainSelectMaps = (function($, window, document, undefined) {\r\n  var getBackgroundImgScale = function getBackgroundImgScale(thumbDimensions) {\r\n    return Math.max(\r\n      thumbDimensions.height / (NATIVE_THUMB_IMG_HEIGHT - 1),\r\n      thumbDimensions.width / (NATIVE_THUMB_IMG_WIDTH - 1) // -1 helps ensure rounding doesn't lose a pixel\r\n    );\r\n  };\r\n\r\n  var getColumnCounts = function getColumnCounts(numThumbs){\r\n    var result = [],\r\n      numThumbsLastRow;\r\n\r\n    for (var columnCount = MIN_COLUMN_NUM; columnCount <= MAX_COLUMN_NUM; columnCount++) {\r\n      numThumbsLastRow = (numThumbs % columnCount);\r\n      if (\r\n        ((numThumbsLastRow * 2) >= columnCount) ||\r\n          ((columnCount - numThumbsLastRow) < 3 )\r\n      ) {\r\n        result.push(columnCount);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  var getMapGridHtml = function getMapGridHtml(mapData) {\r\n    var maps = [],\r\n      html = '<ul>';\r\n\r\n    for (var mapKey in mapData) {\r\n      if (mapData.hasOwnProperty(mapKey)) {\r\n        maps.push({ key: mapKey, name: mapData[mapKey].name });\r\n      }\r\n    }\r\n\r\n    maps.sort(function(a,b) {\r\n      if (a.name < b.name) {\r\n        return -1;\r\n      }\r\n      if (a.name > b.name) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n\r\n    maps.forEach(function(map) {\r\n      html += '<li data-key=\"' + map.key + '\">';\r\n      html += '<a href=\"\" class=\"' + map.key + '\">';\r\n      html += '<div class=\"wrapper absolute thumb\"><div class=\"image thumb\"></div></div>';\r\n      html += '<div class=\"wrapper absolute spinner loading\"><div>';\r\n      html += '</div></div>';\r\n      html += '<p>' + map.name + '</p>';\r\n      html += '</a>';\r\n      html += '</li>';\r\n    });\r\n\r\n    html += '</ul>';\r\n    return html;\r\n  };\r\n\r\n  var getMapLinkMarginVertical = function getMapLinkMarginVertical(availableWidth) {\r\n    return Math.max(Math.min(Math.floor(availableWidth / 100), 10), 20);\r\n  };\r\n\r\n  var getOptimalDimensions = function getOptimalDimensions(\r\n    columnCountsToConsider,\r\n    mapLinkCount,\r\n    availableWidth,\r\n    availableHeight\r\n  ) {\r\n    var results = {};\r\n\r\n    columnCountsToConsider.forEach(function(columnCount) {\r\n      var rowCount = Math.ceil(mapLinkCount / columnCount),\r\n        mapLinkWidth = Math.floor(availableWidth / columnCount),\r\n        mapLinkHeight = Math.floor(availableHeight / rowCount),\r\n        mapLinkRatio = mapLinkWidth / mapLinkHeight;\r\n\r\n      if (\r\n        (\r\n          !results.ratio\r\n          || (Math.abs(NATIVE_THUMB_IMG_RATIO - results.ratio) > Math.abs(NATIVE_THUMB_IMG_RATIO - mapLinkRatio))\r\n        ) &&\r\n        mapLinkWidth >= MIN_MAP_LINK_WIDTH\r\n      ) {\r\n        var mapLinkMarginVertical = getMapLinkMarginVertical(availableWidth), // determined experimentally\r\n          mapLinkMarginHorizontal = Math.round(mapLinkMarginVertical / 2);\r\n\r\n        $.extend(results, {\r\n          _debugColumnCount: columnCount,\r\n          _debugRowCount: rowCount,\r\n          _debugAvailableWidth: availableWidth,\r\n          _debugAvailableHeight: availableHeight,\r\n          ratio: mapLinkRatio,\r\n          width: mapLinkWidth - MAP_LINK_TOTAL_BORDER_SIZE - (mapLinkMarginHorizontal * 2),\r\n          height: mapLinkHeight - MAP_LINK_TOTAL_BORDER_SIZE - (mapLinkMarginVertical),\r\n          marginVertical: mapLinkMarginVertical,\r\n          marginHorizontal: mapLinkMarginHorizontal\r\n        });\r\n      }\r\n    });\r\n    return results;\r\n  };\r\n\r\n  var getViewportDimensions = function getViewportDimensions() {\r\n    return {\r\n      height: $(window).height(),\r\n      width: $(window).width()\r\n    };\r\n  };\r\n\r\n  var checkIe11orLess = function checkIe11orLess() {\r\n    return (navigator && (\r\n      (navigator.appName == 'Microsoft Internet Explorer') || // IE <= 10\r\n      ((navigator.appName == 'Netscape') && (navigator.appVersion.indexOf('Trident') > 0))  // IE = 11 and not Edge\r\n    ));\r\n  };\r\n\r\n  var resizeMapLinks = function resizeMapLinks(\r\n    $selectMapGrid,\r\n    $mapLinks,\r\n    $mainNav,\r\n    $mapLinksContainer\r\n  ) {\r\n    var viewportDimensions = getViewportDimensions(),\r\n      navHeight = $mainNav.height(),\r\n      mapLinkCount = $mapLinks.length,\r\n      columnCounts = getColumnCounts(mapLinkCount),\r\n      availableHeight = viewportDimensions.height - navHeight - VIEWPORT_PADDING_HEIGHT,\r\n      availableWidth = viewportDimensions.width - VIEWPORT_PADDING_WIDTH,\r\n      mapLinkDimensions = getOptimalDimensions(\r\n        columnCounts,\r\n        mapLinkCount,\r\n        availableWidth,\r\n        availableHeight\r\n      ),\r\n      thumbImgScale = getBackgroundImgScale(mapLinkDimensions),\r\n      $spinners = $mapLinks.find('.spinner'),\r\n      isIe11OrLess;\r\n\r\n    $selectMapGrid.css('padding-top', (navHeight + VIEWPORT_PADDING_HEIGHT) + 'px');\r\n    $mapLinks.height(mapLinkDimensions.height);\r\n    $mapLinks.width(mapLinkDimensions.width);\r\n    $mapLinks.css(\r\n      'margin',\r\n      '0 ' + mapLinkDimensions.marginHorizontal + 'px ' + mapLinkDimensions.marginVertical + 'px ' + mapLinkDimensions.marginHorizontal + 'px'\r\n    );\r\n    $spinners.css('background-size', (Math.min(mapLinkDimensions.height, mapLinkDimensions.width) - 20) + 'px');\r\n\r\n    isIe11OrLess = checkIe11orLess();\r\n    // IE11 had an issue with transform scale that caused thumbnails to not center and look awkward\r\n    // This is a workaround that seems fine given the scale/zoom effect is just nice-to-have and it doesn't look awkward now\r\n    if (!isIe11OrLess) {\r\n      setTransformScale(\r\n        $mapLinks.find('div.image.thumb'),\r\n        thumbImgScale\r\n      );\r\n    }\r\n    $mapLinks.hover(function(event) {\r\n      if (!isIe11OrLess) {\r\n        setTransformScale(\r\n          $(event.target).closest('li').find('div.image.thumb'),\r\n          thumbImgScale * THUMB_SCALE_ZOOMED_IN_FACTOR\r\n        );\r\n      }\r\n    }, function(event) {\r\n      if (!isIe11OrLess) {\r\n        setTransformScale(\r\n          $(event.target).closest('li').find('div.image.thumb'),\r\n          thumbImgScale\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  var setTransformScale = function setTransformScale(element, scale) {\r\n    element.css('-ms-transform', 'scale(' + scale + ')');\r\n    element.css('-webkit-transform', 'scale(' + scale + ')');\r\n    element.css('transform', 'scale(' + scale + ')');\r\n  };\r\n\r\n  var setup = function setup(\r\n    $selectMapGrid,\r\n    $heading,\r\n    $mainNav,\r\n    mapData,\r\n    switchToMapCallback,\r\n    closeSelectCallback\r\n  ) {\r\n    $heading.text('Select a map');\r\n    $selectMapGrid.html(getMapGridHtml(mapData));\r\n    $selectMapGrid.on('click', 'a', function(event) {\r\n      event.preventDefault();\r\n      switchToMapCallback($(event.target).closest('li').data('key'));\r\n    });\r\n    $selectMapGrid.on('click', closeSelectCallback);\r\n\r\n    var handleResize = function handleResize() {\r\n      resizeMapLinks(\r\n        $selectMapGrid,\r\n        $selectMapGrid.find('a'),\r\n        $mainNav,\r\n        $selectMapGrid.find('ul')\r\n      );\r\n    };\r\n\r\n    handleResize();\r\n    $(window).on('resize', handleResize);\r\n    setTimeout(function() {\r\n      $selectMapGrid.addClass('enable-thumb-transition');\r\n    }, 1);\r\n\r\n    $('<img/>').attr('src', 'img/map-thumbs.jpg').load(function() {\r\n      $(this).remove(); // prevent memory leaks\r\n      $selectMapGrid.find('.spinner').removeClass('loading');\r\n    });\r\n  };\r\n\r\n  return  {\r\n    setup: setup\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\nvar PING_MARKER_RADIUS = 10,\r\n  MIN_PING_MARKER_RADIUS = 7,\r\n  MAX_PING_MARKER_RADIUS = 16,\r\n  PING_MARKER_BORDER_PERCENT = 0.2,\r\n  MIN_PING_MARKER_BORDER = 1,\r\n  refreshPings = function() { };\r\n\r\nvar R6MMainDrawing = (function($, window, document, undefined) {\r\n  var getHandleTapFn = function getHandleTapFn(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $pingMarkersVertical,\r\n    $pingMarkersHorizontal,\r\n    $pingMarkersOtherFloor,\r\n    SVG_DIM\r\n  ) {\r\n    return function handleTap(event) {\r\n      var $mapWrapper =  $(event.target).closest('.map-wrapper'),\r\n        pingPosition = getPingPosition(event.center.x, event.center.y, $mapWrapper),\r\n        newX = pingPosition.x,\r\n        newY = pingPosition.y,\r\n        originFloorIndex = $mapWrapper.attr('show-floor-index');\r\n\r\n      movePingMarkers(\r\n        $pingMarkers,\r\n        $pingMarkerAccents,\r\n        $pingMarkersVertical,\r\n        $pingMarkersHorizontal,\r\n        $pingMarkersOtherFloor,\r\n        newX + SVG_DIM.LEFT_OFFSET,\r\n        newY + SVG_DIM.TOP_OFFSET,\r\n        originFloorIndex\r\n      );\r\n    };\r\n  };\r\n\r\n  var getHidePingMarkersFn = function getHidePingMarkersFn(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $pingMarkersVertical,\r\n    $pingMarkersHorizontal,\r\n    $pingMarkersOtherFloor\r\n  ) {\r\n    return function hidePingMarkers() {\r\n      movePingMarkers(\r\n        $pingMarkers,\r\n        $pingMarkerAccents,\r\n        $pingMarkersVertical,\r\n        $pingMarkersHorizontal,\r\n        $pingMarkersOtherFloor,\r\n        -10000,\r\n        -10000\r\n      );\r\n    };\r\n  };\r\n\r\n  var getPingPosition = function getPingPosition(x, y, mapWrapper) {\r\n    var centerX = mapWrapper.offset().left + (mapWrapper.width() / 2),\r\n      centerY = mapWrapper.offset().top + (mapWrapper.height() / 2),\r\n      $mapMain = mapWrapper.find('.map-main'),\r\n      transforms = $mapMain.panzoom('getMatrix'),\r\n      transformX = parseInt(transforms[4]),\r\n      transformY = parseInt(transforms[5]),\r\n      scale = transforms[0];\r\n\r\n    return {\r\n      x: Math.round((x - centerX - transformX) / scale),\r\n      y: Math.round((y - centerY - transformY) / scale)\r\n    };\r\n  };\r\n\r\n  var getResizePingMarkersFn = function getResizePingMarkersFn(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $mapMains,\r\n    $pingMarkersOtherFloor\r\n  ) {\r\n    return function $resizePingMarkers() {\r\n      var scale = $($mapMains[0]).panzoom('getMatrix')[0],\r\n        radius = Math.round(PING_MARKER_RADIUS / scale),\r\n        radius = Math.max(MIN_PING_MARKER_RADIUS, radius),\r\n        radius = Math.min(MAX_PING_MARKER_RADIUS, radius),\r\n        strokeWidth = Math.max(MIN_PING_MARKER_BORDER, Math.floor(radius * PING_MARKER_BORDER_PERCENT));\r\n\r\n      radius -= strokeWidth;\r\n      $pingMarkers.attr('r', radius);\r\n      $pingMarkerAccents.attr('r', radius * 2);\r\n      $pingMarkers.attr('stroke-width', strokeWidth);\r\n      $pingMarkersOtherFloor.attr('stroke-width', strokeWidth);\r\n    };\r\n  };\r\n\r\n  var movePingMarkers = function movePingMarkers(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $pingMarkersVertical,\r\n    $pingMarkersHorizontal,\r\n    $pingMarkersOtherFloor,\r\n    x,\r\n    y,\r\n    originFloorIndex\r\n  ) {\r\n    $pingMarkers.attr('cx', x);\r\n    $pingMarkers.attr('cy', y);\r\n    $pingMarkerAccents.attr('cx', x);\r\n    $pingMarkerAccents.attr('cy', y);\r\n    $pingMarkersVertical.attr('x1', x);\r\n    $pingMarkersVertical.attr('x2', x);\r\n    $pingMarkersHorizontal.attr('y1', y);\r\n    $pingMarkersHorizontal.attr('y2', y);\r\n\r\n    refreshPings = function refreshPings() {\r\n      $.each($pingMarkersOtherFloor, function(index, otherFloorMarker) {\r\n        var $marker = $(otherFloorMarker);\r\n        var currentFloorIndex = $marker.closest('.map-wrapper').attr('show-floor-index');\r\n\r\n        if (!originFloorIndex || originFloorIndex == currentFloorIndex) {\r\n          $marker.attr('transform', 'translate(-10000 -10000)');\r\n        } else if (originFloorIndex < currentFloorIndex) {\r\n          $marker.attr('transform', 'translate(' + (x - 9) + ' ' + (y - 5) + '), rotate(0)');\r\n        } else {\r\n          $marker.attr('transform', 'translate(' + (x + 9) + ' ' + (y + 5) + '), rotate(180)');\r\n        }\r\n      });\r\n\r\n      $.each($pingMarkers, function(index, pingMarker) {\r\n        var $marker = $(pingMarker);\r\n        var currentFloorIndex = $marker.closest('.map-wrapper').attr('show-floor-index');\r\n\r\n        if (!originFloorIndex || originFloorIndex == currentFloorIndex) {\r\n          $marker.removeClass('other-floor');\r\n        } else {\r\n          $marker.addClass('other-floor');\r\n        }\r\n      });\r\n    };\r\n    refreshPings();\r\n\r\n    $pingMarkers.addClass('highlight');\r\n    $pingMarkerAccents.addClass('highlight');\r\n    $pingMarkersVertical.addClass('highlight');\r\n    $pingMarkersHorizontal.addClass('highlight');\r\n\r\n    setTimeout(function() {\r\n      $pingMarkers.removeClass('highlight');\r\n      $pingMarkerAccents.removeClass('highlight');\r\n      $pingMarkersVertical.removeClass('highlight');\r\n      $pingMarkersHorizontal.removeClass('highlight');\r\n    }, 100);\r\n  };\r\n\r\n  var populateStartingMarkers = function populateStartingMarkers($drawingMarkerWrappers, SVG_DIM) {\r\n    var html = '';\r\n\r\n    html += '<svg class=\"svg-elements drawing-markers\" style=\"width: ' + SVG_DIM.WIDTH + 'px; left: -' + SVG_DIM.LEFT_OFFSET + 'px; height: ' + SVG_DIM.HEIGHT + 'px; top: -' + SVG_DIM.TOP_OFFSET + 'px;\">';\r\n    html += '<g>';\r\n    html += '<line class=\"ping-marker vertical\" x1=\"-9000\" y1=\"35\" x2=\"-10000\" y2=\"' + (SVG_DIM.HEIGHT + 35) + '\" stroke-width=\"2\"/>';\r\n    html += '<line class=\"ping-marker horizontal\" x1=\"-25\" y1=\"-10000\" x2=\"' + (SVG_DIM.WIDTH - 25) + '\" y2=\"-9000\" stroke-width=\"2\"/>';\r\n    html += '<circle class=\"ping-marker accent\" cx=\"-10000\" cy=\"-10000\" r=\"6\" stroke-width=\"2\"/>';\r\n    html += '<circle class=\"ping-marker center\" cx=\"-10000\" cy=\"-10000\" r=\"6\" stroke-width=\"2\"/>';\r\n    html += '<polygon class=\"ping-marker other-floor\" points=\"0,0 18,0 9,15.5884\" stroke-width=\"2\" transform=\"translate(-10000 -10000)\"></polygon>';\r\n    html += '</g>';\r\n    html += '</svg>';\r\n    $drawingMarkerWrappers.html(html);\r\n  };\r\n\r\n  var refreshPingsWrapper = function refreshPingsWrapper() {\r\n    refreshPings();\r\n  };\r\n\r\n  var setup = function setup (\r\n    $mapMains,\r\n    $drawingMarkerWrappers,\r\n\r\n    SVG_DIM\r\n  ) {\r\n    populateStartingMarkers($drawingMarkerWrappers, SVG_DIM);\r\n\r\n    var $pingMarkers = $drawingMarkerWrappers.find('.ping-marker.center'),\r\n      $pingMarkerAccents = $drawingMarkerWrappers.find('.ping-marker.accent'),\r\n      $pingMarkersVertical = $drawingMarkerWrappers.find('.ping-marker.vertical'),\r\n      $pingMarkersHorizontal = $drawingMarkerWrappers.find('.ping-marker.horizontal'),\r\n      $pingMarkersOtherFloor = $drawingMarkerWrappers.find('.ping-marker.other-floor'),\r\n      handleTap = getHandleTapFn($pingMarkers, $pingMarkerAccents, $pingMarkersVertical, $pingMarkersHorizontal, $pingMarkersOtherFloor, SVG_DIM),\r\n      resizePingMarkers = getResizePingMarkersFn($pingMarkers, $pingMarkerAccents, $mapMains, $pingMarkersOtherFloor),\r\n      hidePingMarkers = getHidePingMarkersFn($pingMarkers, $pingMarkerAccents, $pingMarkersVertical, $pingMarkersHorizontal, $pingMarkersOtherFloor);\r\n\r\n    $mapMains.each(function(index, main) {\r\n      var mc = new Hammer(main);\r\n\r\n      mc.on('press', handleTap);\r\n      mc.on('tap', handleTap);\r\n    });\r\n    $pingMarkers.on('click', hidePingMarkers);\r\n    $mapMains.on('panzoomzoom', resizePingMarkers);\r\n    resizePingMarkers();\r\n  };\r\n\r\n  return  {\r\n    setup: setup,\r\n    refreshPings: refreshPingsWrapper\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\n(function(pagecode) { //eslint-disable-line wrap-iife\r\n  pagecode(window.jQuery, window, document, R6MMainData, R6MMainRender, R6MMainControls, R6MMainDrawing, R6MMainSelectMaps, R6MHelpers);\r\n}(function($, window, document, R6MMainData, R6MMainRender, R6MMainControls, R6MMainDrawing, R6MMainSelectMaps, R6MHelpers, undefined) {\r\n  var $mapWrappers,\r\n    $mapPanelWrappers,\r\n    $mapMains,\r\n    $mapElements,\r\n    $mapPanelLabels,\r\n    $drawingMarkerWrappers,\r\n    $navLogo,\r\n    $body,\r\n    $mainNav,\r\n    SHOW_MAP = 'show-map',\r\n    SHOW_SELECT_MAP = 'show-select-map',\r\n    HASH_SPLIT_CHAR = '/';\r\n\r\n  $(function() { // equivanelt to $(document).ready() - but a bit faster\r\n    setPageElements();\r\n    R6MMainRender.setupMapPanels($mapPanelWrappers, 4);\r\n    setMapElements();\r\n    setupMenu();\r\n    setupSelectMap();\r\n    R6MMainControls.maps.populate(R6MMainData.getMapData());\r\n\r\n    setupEvents();\r\n    $navLogo.on('click', toggleShowSelectMap);\r\n    tryLoadMenuOptions();\r\n\r\n    R6MMainControls.setupPanZoom($mapMains, $mapElements);\r\n\r\n    if (trySelectBookmarkedMap()) {\r\n      loadMap();\r\n      trySelectBookmarkedObjective();\r\n      trySelectBookmarkedFloor();\r\n      showMap();\r\n    } else {\r\n      showSelectMap();\r\n      document.title = 'R6Calls.com';\r\n    }\r\n\r\n    setTimeout(function() {\r\n      $body.removeClass('loading');\r\n    }, 10);\r\n  });\r\n\r\n  var checkIfMapLoaded = function checkIfMapLoaded() {\r\n    return $body.attr('loaded-map');\r\n  };\r\n\r\n  var closeMenu = function closeMenu() {\r\n    getMenuApi().close();\r\n  };\r\n\r\n  var isShowingMap = function isShowingMap() {\r\n    return $body.hasClass(SHOW_MAP);\r\n  };\r\n\r\n  var getHashArgs = function getHashArgs() {\r\n    return window.location.hash.substr(1).split(HASH_SPLIT_CHAR);\r\n  };\r\n\r\n  var getLoadedMapKey = function getLoadedMapKey() {\r\n    return $('body').attr('loaded-map');\r\n  };\r\n\r\n  var getMenuApi = function getMenuApi() {\r\n    return $('#mmenu-menu').data( 'mmenu' );\r\n  };\r\n\r\n  var getResetDimensions = function getResetDimensions() {\r\n    var zoomPoints = {\r\n      topLeft: { top: -180, left: -312 }, // default\r\n      bottomRight: { top: 180, left: 312 }\r\n    };\r\n    var zoomWidth = zoomPoints.bottomRight.left - zoomPoints.topLeft.left,\r\n      zoomHeight = zoomPoints.bottomRight.top - zoomPoints.topLeft.top,\r\n      centerTop = Math.round(zoomPoints.bottomRight.top - (zoomHeight / 2)),\r\n      centerLeft = Math.round(zoomPoints.topLeft.left + (zoomWidth / 2)),\r\n      panelWidth = $mapWrappers.width(),\r\n      panelHeight = $mapWrappers.height(),\r\n      navHeight = $mainNav.height(),\r\n      paddingWidth = Math.min(panelHeight * 0.1, navHeight),\r\n      paddingHeight = Math.min(panelHeight * 0.1, navHeight * 2);\r\n\r\n    panelWidth = panelWidth - paddingWidth;\r\n    panelHeight = panelHeight - paddingHeight;\r\n    var result = {\r\n      debugZoomWidth: zoomWidth,\r\n      debugZoomHeight: zoomHeight,\r\n      centerTop: centerTop,\r\n      centerLeft: centerLeft,\r\n      debugPanelWidth: panelWidth,\r\n      debugPanelHeight: panelHeight,\r\n      debugPaddingWidth: paddingWidth,\r\n      debugPaddingHeight: paddingHeight,\r\n      zoomValue: Math.max(\r\n        Math.min(\r\n          1,\r\n          panelWidth / zoomWidth,\r\n          panelHeight / zoomHeight\r\n        ),\r\n        0.5\r\n      )\r\n    };\r\n\r\n    return result;\r\n  };\r\n\r\n  var handleFloorChange = function handleFloorChange() {\r\n    sendFloorSelectAnalyticsEvent();\r\n    showSelectedFloor();\r\n    updateUrl();\r\n    R6MMainDrawing.refreshPings(); // hacky drawing module for now\r\n  };\r\n\r\n  var handleMapChange = function handleMapChange() {\r\n    sendMapSelectAnalyticsEvent();\r\n    loadMap();\r\n    updateUrl();\r\n  };\r\n\r\n  var handleMapPanelCountChange = function handleMapPanelCountChange(numPanels) {\r\n    sendMapPanelCountEvent(numPanels);\r\n    setMapPanelCount(numPanels);\r\n  };\r\n\r\n  var handleMenuClick = function handleMenuClick(e) {\r\n    var menuApi = getMenuApi();\r\n\r\n    e.preventDefault();\r\n    menuApi.open();\r\n    R6MMainControls.removeLatestUpdateHighlight(200);\r\n  };\r\n\r\n  var handleObjectiveChange = function handleObjectiveChange() {\r\n    sendObjectiveSelectAnalyticsEvent();\r\n    showSelectedObjective();\r\n    updateUrl();\r\n  };\r\n\r\n  var hideSelectMap = function hideSelectMap() {\r\n    $body.removeClass(SHOW_SELECT_MAP);\r\n  };\r\n\r\n  var localStorageSetItem = function localStorageSetItem(index, value) {\r\n    try {\r\n      localStorage.setItem(index, value);\r\n    } catch (e) {\r\n      //guarding against safari in private browsing mode\r\n    }\r\n  };\r\n\r\n  var loadMap = function loadMap() {\r\n    var currentlySelectedMap = R6MMainControls.maps.get(),\r\n      mapData = R6MMainData.getMapData();\r\n\r\n    R6MMainControls.objectives.populate(['bomb', 'hostage', 'secure']);\r\n    R6MMainControls.floors.populate(mapData[currentlySelectedMap].floors);\r\n    R6MMainRender.renderMap(mapData[currentlySelectedMap], $mapWrappers, $mapElements, $mapPanelLabels);\r\n\r\n    R6MMainControls.pan.reset($mapMains, getResetDimensions);\r\n    R6MMainControls.zoom.reset($mapMains, getResetDimensions);\r\n\r\n    showSelectedFloor();\r\n    showSelectedObjective();\r\n\r\n    setLoadedMapKey(currentlySelectedMap);\r\n    $navLogo.addClass('enabled');\r\n    updateTitle();\r\n\r\n    R6MMainDrawing.setup(\r\n      $mapMains,\r\n      $drawingMarkerWrappers,\r\n      R6MMainRender.SVG_DIM\r\n    );\r\n\r\n    R6MMainControls.display.MAP_LAYER.forEach(function(layer) {\r\n      R6MMainControls.display.setLayerDisplay(layer.short);\r\n    });\r\n  };\r\n\r\n  var removeHashFromUrl = function removeHashFromUrl() {\r\n    var scrollV, scrollH, loc = window.location;\r\n\r\n    if ('pushState' in history) {\r\n      history.pushState('', document.title, loc.pathname + loc.search);\r\n    } else {\r\n      // Prevent scrolling by storing the page's current scroll offset\r\n      scrollV = document.body.scrollTop;\r\n      scrollH = document.body.scrollLeft;\r\n\r\n      loc.hash = '';\r\n      // Restore the scroll offset, should be flicker free\r\n      document.body.scrollTop = scrollV;\r\n      document.body.scrollLeft = scrollH;\r\n    }\r\n  };\r\n\r\n  var saveOption = function saveOption(key, value) {\r\n    localStorageSetItem(key, value);\r\n    if (value) {\r\n      R6MMainControls.pan.reset($mapMains, getResetDimensions);\r\n    }\r\n  };\r\n\r\n  var sendControlAnalyticsEvent = function sendControlAnalyticsEvent(control, value) {\r\n    ga('send', {\r\n      hitType: 'event',\r\n      eventCategory: 'Controls',\r\n      eventAction: control,\r\n      eventLabel: value\r\n    });\r\n  };\r\n\r\n  var sendFloorSelectAnalyticsEvent = function sendFloorSelectAnalyticsEvent() {\r\n    sendControlAnalyticsEvent('Floor', R6MMainControls.floors.get());\r\n  };\r\n\r\n  var sendMapPanelCountEvent = function sendMapPanelCountEvent(panelCount) {\r\n    sendControlAnalyticsEvent('PanelsCount', panelCount);\r\n  };\r\n\r\n  var sendMapSelectAnalyticsEvent = function sendMapSelectAnalyticsEvent() {\r\n    sendControlAnalyticsEvent('Map', R6MMainControls.maps.get());\r\n  };\r\n\r\n  var sendObjectiveSelectAnalyticsEvent = function sendObjectiveSelectAnalyticsEvent() {\r\n    sendControlAnalyticsEvent('Objective', R6MMainControls.objectives.get());\r\n  };\r\n\r\n  var setLoadedMapKey = function setLoadedMapKey(mapKey) {\r\n    $body.attr('loaded-map', mapKey);\r\n  };\r\n\r\n  var setMapElements = function setMapElements() {\r\n    $mapWrappers = $('.map-wrapper');\r\n    $mapMains = $mapWrappers.find('.map-main');\r\n    $mapElements = $mapMains.find('.map-elements');\r\n    $mapPanelLabels = $('.map-panel-label');\r\n    $drawingMarkerWrappers = $mapMains.find('.svg-wrapper.drawing-markers');\r\n  };\r\n\r\n  var setMapPanelCount = function setMapPanelCount(numPanels) {\r\n    localStorageSetItem('mappanelcount', numPanels);\r\n    $mapPanelWrappers.attr('map-panel-count', numPanels);\r\n\r\n    $.each($mapMains, function (index, map) {\r\n      if (index < numPanels) {\r\n        $(map).css('display', 'block');\r\n        R6MMainControls.zoom.enable($(map));\r\n      } else {\r\n        $(map).css('display', 'none');\r\n        R6MMainControls.zoom.disable($(map));\r\n      }\r\n    });\r\n\r\n    R6MMainControls.pan.reset($mapMains, getResetDimensions);\r\n    R6MMainControls.zoom.reset($mapMains, getResetDimensions);\r\n\r\n    showSelectedFloor();\r\n  };\r\n\r\n  var setPageElements = function setPageElements() {\r\n    $mapPanelWrappers = $('#map-panel-wrapper');\r\n    $navLogo = $('#nav-logo');\r\n    $body = $('body');\r\n    $mainNav = $('#main-nav');\r\n  };\r\n\r\n  var setupEvents = function setupEvents() {\r\n    R6MMainControls.objectives.setup(handleObjectiveChange);\r\n    R6MMainControls.maps.setup(handleMapChange);\r\n    R6MMainControls.floors.setup(handleFloorChange, showSelectedFloor);\r\n    R6MMainControls.mapPanels.setup(handleMapPanelCountChange);\r\n    R6MMainControls.display.MAP_LAYER.forEach(function(layer) {\r\n      R6MMainControls.menu.setupMenuOptionChangeEvent(layer.short, saveOption);\r\n    });\r\n    R6MMainControls.menu.setupMenuOptionChangeEvent('lp', saveOption);\r\n    R6MMainControls.menu.setupSelectMaps(showSelectMap, closeMenu);\r\n    R6MMainControls.menu.setupFullScreen();\r\n\r\n    $(window).on('orientationchange', function() {\r\n      R6MMainControls.pan.reset($mapMains, getResetDimensions);\r\n      R6MMainControls.zoom.reset($mapMains, getResetDimensions);\r\n    });\r\n  };\r\n\r\n  var showMap = function showMap() {\r\n    hideSelectMap();\r\n    $body.addClass(SHOW_MAP);\r\n    updateUrl();\r\n    updateTitle();\r\n  };\r\n\r\n  var showSelectMap = function showSelectMap() {\r\n    $body.removeClass(SHOW_MAP);\r\n    $body.addClass(SHOW_SELECT_MAP);\r\n    updateUrl();\r\n    updateTitle();\r\n  };\r\n\r\n  var setupMenu = function setupMenu() {\r\n    var $menuLink = $('#mmenu-link');\r\n\r\n    R6MMainControls.menu.setup();\r\n\r\n    var foo = $('#mmenu-menu').mmenu({\r\n      offCanvas: {\r\n        position: 'right',\r\n        pageSelector: '#mmenu-page'\r\n      },\r\n      extensions: ['pagedim'],\r\n      rtl: {\r\n        use: false\r\n      }\r\n    });\r\n\r\n    $menuLink.click(handleMenuClick);\r\n  };\r\n\r\n  var setupSelectMap = function setupSelectMap() {\r\n    R6MMainSelectMaps.setup(\r\n      $('#select-map-grid'),\r\n      $('#select-map-heading'),\r\n      $mainNav,\r\n      R6MMainData.getMapData(),\r\n      switchToMap,\r\n      tryHideMapSelect\r\n    );\r\n  };\r\n\r\n  var showSelectedFloor =  function showSelectedFloor() {\r\n    var minMadFlorIndexes = R6MMainControls.floors.getMinMaxIndex();\r\n\r\n    R6MMainRender.showFloor(\r\n      R6MMainControls.floors.get(),\r\n      $mapPanelWrappers,\r\n      $mapWrappers,\r\n      minMadFlorIndexes.min,\r\n      minMadFlorIndexes.max\r\n    );\r\n  };\r\n\r\n  var showSelectedObjective =  function showSelectedObjective() {\r\n    R6MMainRender.showObjective(R6MMainControls.objectives.get(), $mapElements);\r\n  };\r\n\r\n  var switchToMap = function switchToMap(mapArg) {\r\n    if (R6MMainControls.maps.trySelect(mapArg)) {\r\n      hideSelectMap();\r\n      setTimeout(function() {\r\n        loadMap();\r\n        showMap();\r\n      },1);\r\n    }\r\n  };\r\n\r\n  var toggleShowSelectMap = function toggleShowSelectMap(event) {\r\n    var menuApi = getMenuApi();\r\n\r\n    event.preventDefault();\r\n    if (isShowingMap()) {\r\n      showSelectMap();\r\n      menuApi.close();\r\n    } else if (checkIfMapLoaded()) {\r\n      showMap();\r\n      menuApi.close();\r\n    }\r\n  };\r\n\r\n  var tryHideMapSelect = function tryHideMapSelect() {\r\n    if (checkIfMapLoaded()) {\r\n      showMap();\r\n    }\r\n  };\r\n\r\n  var tryLoadMenuOption = function tryLoadDisplayption(key) {\r\n    var menuOption = localStorage.getItem(key);\r\n\r\n    if (menuOption !== null) {\r\n      R6MMainControls.menu.setMenuOption(key, menuOption);\r\n    }\r\n  };\r\n\r\n  var tryLoadMapPanelCount = function tryLoadMapPanelCount() {\r\n    var mapPanelCount = localStorage.getItem('mappanelcount');\r\n\r\n    if (!mapPanelCount) {\r\n      var $window = $(window);\r\n\r\n      mapPanelCount = (\r\n        ($window.width() > 1000) || ($window.height() > 1000)\r\n      ) ? 2 : 1;\r\n    }\r\n    R6MMainControls.mapPanels.trySelect(mapPanelCount);\r\n    setMapPanelCount(mapPanelCount);\r\n  };\r\n\r\n  var tryLoadMenuOptions = function tryLoadMenuOptions() {\r\n    tryLoadMapPanelCount();\r\n    R6MMainControls.display.MAP_LAYER.forEach(function(layer) {\r\n      tryLoadMenuOption(layer.short);\r\n    });\r\n    tryLoadMenuOption('lp');\r\n  };\r\n\r\n  var trySelectBookmarkedMap = function trySelectBookmarkedMap() {\r\n    var hashArgs = getHashArgs(),\r\n      mapArg = hashArgs[0];\r\n\r\n    return R6MMainControls.maps.trySelect(mapArg);\r\n  };\r\n\r\n  var trySelectBookmarkedObjective = function trySelectBookmarkedObjective() {\r\n    var hashArgs = getHashArgs(),\r\n      objectiveArg = hashArgs[2];\r\n\r\n    if (R6MMainControls.objectives.trySelect(objectiveArg)) {\r\n      showSelectedObjective();\r\n    }\r\n  };\r\n\r\n  var trySelectBookmarkedFloor = function trySelectBookmarkedFloor() {\r\n    var hashArgs = getHashArgs(),\r\n      floorArg = hashArgs[1];\r\n\r\n    if (R6MMainControls.floors.trySelect(floorArg)) {\r\n      showSelectedFloor();\r\n    }\r\n  };\r\n\r\n  var updateUrl = function updateUrl() {\r\n    if (isShowingMap()) {\r\n      var hashText = '';\r\n\r\n      hashText += '' + R6MMainControls.maps.get();\r\n      hashText += HASH_SPLIT_CHAR + R6MMainControls.floors.get();\r\n      hashText += HASH_SPLIT_CHAR + R6MMainControls.objectives.get();\r\n      window.location.hash = hashText;\r\n    } else {\r\n      removeHashFromUrl();\r\n    }\r\n  };\r\n\r\n  var updateTitle = function updateTitle() {\r\n    document.title = isShowingMap() ?\r\n      'R6Calls.com - {mapName}'.replace(\r\n        '{mapName}',\r\n        R6MMainData.getMapData()[getLoadedMapKey()].name\r\n      ) :\r\n      'R6Calls.com - Select a map';\r\n  };\r\n}));\r\n"],"names":["R6MMainData","floorTerms","subBasement","full","short","basement","firstFloor","secondFloor","thirdFloor","fourthFloor","roof","getMapData","bank","name","imgUrlPrefix","floors","index","top","left","dontSelect","bartlett","border","chalet","club","coastline","consulate","favela","fortress","hereford","house","kafe","kanal","oregon","outback","plane","skyscraper","themepark","tower","villa","yacht","R6MMainRender","$","document","SVG_DIM","WIDTH","HEIGHT","TOP_OFFSET","LEFT_OFFSET","fn","removeClassPrefix","prefix","this","each","i","el","classes","className","split","filter","c","lastIndexOf","trim","join","FLOOR_CSS_TEXT","-1","0","1","2","3","4","5","getPositionStyle","element","styleString","bottom","right","height","width","rotate","renderMap","mapData","$mapWrappers","$mapElements","$mapPanelLabels","html","deferrs","addClass","currentDeferr","Deferred","imgSrc","attr","load","remove","resolve","push","when","apply","then","removeClass","getMaxFloorIndexHtml","cssClass","mySVGsToInject","querySelectorAll","SVGInjector","forEach","floor","setupMapPanels","$mapPanelWrappers","numPanels","x","append","showFloor","selectedFloorIndex","minFloorIndex","maxFloorIndex","Math","max","tempMinIndex","startingIndex","min","map","showObjective","objective","objectivePrefix","window","jQuery","R6MMainControls","floorsGetCurrentIndex","$floorControl","find","data","getHandleZoomChangeFn","zoomVal","$zoomControl","val","ZOOMED_IN_FAR_CLASS","ZOOMED_OUT_FAR_CLASS","handlePanZoomEnd","trigger","mapsGetCurrentlySelected","$mapControl","setLayerDisplay","key","visible","getDisplayValue","getElementsByClassName","svgObjects","getElementById","length","svgDoc","rect","svgObject","getSVGDocument","setAttribute","hidden","objectivesGetCurrentlySelected","$objectiveControl","$mapPanelCountControl","$fullScreenControl","$menuSelectMapsControl","$menuControl","$menuPanel","SELECTED_CLASS","MAP_LAYER","floorsTrySelect","floorIndex","$selectedFloor","resetSelectedFloor","getFloorTooltip","shortcutTip","replace","is","isFullScreenAvailable","fullscreenEnabled","webkitFullscreenEnabled","webkitCancelFullScreen","mozFullScreenEnabled","msFullscreenEnabled","mapsTrySelect","R6MHelpers","trySelectOption","setupFloorChangeEvent","callback","on","e","floorButton","target","tagName","parent","setupFloorHotkeys","showSelectedFloorFn","keyCode","which","toggleFullScreen","rootEl","fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","documentElement","requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","mozRequestFullScreen","msRequestFullscreen","objectivesTrySelect","tryShowLockControls","numberPanels","$lockWrapper","show","hide","unhighlightControl","$el","initialDelayMs","hasClass","setTimeout","get","getMinMaxIndex","$floorInputs","populate","buttonsAsString","tooltip","initalFloor","setup","handleChangeCallback","trySelect","mapPanels","event","panelCount","number","result","maps","optionsAsString","currentMap","mapKey","hasOwnProperty","sort","a","b","menu","CSS_ABBREV","class","description","item","layer","setupFullScreen","setupSelectMaps","showSelectMapCallback","closeMenuCallback","preventDefault","setMenuOption","isChecked","boolValue","prop","setupMenuOptionChangeEvent","change","display","objectives","initialObjective","options","pan","reset","$mapMains","getResetDimensions","resetDimensions","panzoom","centerLeft","zoomValue","centerTop","zoom","disable","enable","isZoomed","highlightControl","removeLatestUpdateHighlight","setupPanZoom","$zoomRange","minScale","maxScale","deltaY","click","transform","silent","MIN_COLUMN_NUM","MAX_COLUMN_NUM","NATIVE_THUMB_IMG_WIDTH","NATIVE_THUMB_IMG_HEIGHT","NATIVE_THUMB_IMG_RATIO","VIEWPORT_PADDING_HEIGHT","VIEWPORT_PADDING_WIDTH","MAP_LINK_TOTAL_BORDER_SIZE","MIN_MAP_LINK_WIDTH","THUMB_SCALE_ZOOMED_IN_FACTOR","R6MMainSelectMaps","getOptimalDimensions","columnCountsToConsider","mapLinkCount","availableWidth","availableHeight","results","columnCount","mapLinkMarginVertical","mapLinkMarginHorizontal","rowCount","ceil","mapLinkWidth","mapLinkHeight","mapLinkRatio","ratio","abs","round","extend","_debugColumnCount","_debugRowCount","_debugAvailableWidth","_debugAvailableHeight","marginVertical","marginHorizontal","resizeMapLinks","$selectMapGrid","$mapLinks","$mainNav","isIe11OrLess","thumbDimensions","viewportDimensions","navHeight","columnCounts","numThumbs","numThumbsLastRow","getColumnCounts","mapLinkDimensions","thumbImgScale","$spinners","css","navigator","appName","appVersion","indexOf","setTransformScale","hover","closest","scale","$heading","switchToMapCallback","closeSelectCallback","text","getMapGridHtml","handleResize","PING_MARKER_RADIUS","MIN_PING_MARKER_RADIUS","MAX_PING_MARKER_RADIUS","PING_MARKER_BORDER_PERCENT","MIN_PING_MARKER_BORDER","refreshPings","R6MMainDrawing","getPingPosition","y","mapWrapper","centerX","offset","centerY","transforms","transformX","parseInt","transformY","movePingMarkers","$pingMarkers","$pingMarkerAccents","$pingMarkersVertical","$pingMarkersHorizontal","$pingMarkersOtherFloor","originFloorIndex","otherFloorMarker","$marker","currentFloorIndex","pingMarker","$drawingMarkerWrappers","handleTap","$mapWrapper","pingPosition","center","newX","newY","resizePingMarkers","radius","strokeWidth","hidePingMarkers","main","mc","Hammer","$navLogo","$body","SHOW_MAP","SHOW_SELECT_MAP","HASH_SPLIT_CHAR","setPageElements","setMapElements","setupMenu","setupSelectMap","setupEvents","toggleShowSelectMap","tryLoadMenuOptions","trySelectBookmarkedMap","loadMap","trySelectBookmarkedObjective","trySelectBookmarkedFloor","showMap","showSelectMap","title","checkIfMapLoaded","closeMenu","getMenuApi","close","isShowingMap","getHashArgs","location","hash","substr","getLoadedMapKey","zoomPoints","topLeft","bottomRight","zoomWidth","zoomHeight","panelWidth","panelHeight","paddingWidth","paddingHeight","debugZoomWidth","debugZoomHeight","debugPanelWidth","debugPanelHeight","debugPaddingWidth","debugPaddingHeight","handleFloorChange","sendFloorSelectAnalyticsEvent","showSelectedFloor","updateUrl","handleMapChange","sendMapSelectAnalyticsEvent","handleMapPanelCountChange","sendMapPanelCountEvent","setMapPanelCount","handleMenuClick","menuApi","open","handleObjectiveChange","sendObjectiveSelectAnalyticsEvent","showSelectedObjective","hideSelectMap","localStorageSetItem","value","localStorage","setItem","currentlySelectedMap","setLoadedMapKey","updateTitle","removeHashFromUrl","scrollV","scrollH","loc","history","pushState","pathname","search","body","scrollTop","scrollLeft","saveOption","sendControlAnalyticsEvent","control","ga","hitType","eventCategory","eventAction","eventLabel","$menuLink","foo","mmenu","offCanvas","position","pageSelector","extensions","rtl","use","switchToMap","tryHideMapSelect","minMadFlorIndexes","mapArg","tryLoadMenuOption","tryLoadDisplayption","menuOption","getItem","tryLoadMapPanelCount","mapPanelCount","$window","hashArgs","objectiveArg","floorArg","hashText","pagecode"],"mappings":"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"}