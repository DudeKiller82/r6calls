{"version":3,"file":"./site/js/release.2.4.1/main.min.js.map","sources":["./dev/js/main/main.map-data.js","./dev/js/main/main.map-render.js","./dev/js/main/main.controls.js","./dev/js/main/main.map-selection.js","./dev/js/main/main.drawing.js","./dev/js/main/main.js"],"sourcesContent":["'use strict';\r\n\r\nvar R6MMainData = (function(undefined){\r\n  var floorTerms = {\r\n    subBasement: { full: 'Sub-Basement', short: 'SB'},\r\n    basement: { full: 'Basement', short: 'B' },\r\n    firstFloor: { full: '1st Floor', short: '1' },\r\n    secondFloor: { full: '2nd Floor', short: '2' },\r\n    thirdFloor: { full: '3rd Floor', short: '3' },\r\n    fourthFloor: { full: '4th Floor', short: '4' },\r\n    roof: { full: 'Roof', short: 'R' }\r\n  };\r\n\r\n  var getMapData = function getMapData() {\r\n    return {\r\n      bank: {\r\n        name: 'Bank',\r\n        imgUrlPrefix: 'bank',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      bartlett: {\r\n        name: 'Bartlett U.',\r\n        imgUrlPrefix: 'bartlett',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      border: {\r\n        name: 'Border',\r\n        imgUrlPrefix: 'border',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      chalet: {\r\n        name: 'Chalet',\r\n        imgUrlPrefix: 'chalet',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      club: {\r\n        name: 'Club House',\r\n        imgUrlPrefix: 'club-house',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      coastline: {\r\n        name: 'Coastline',\r\n        imgUrlPrefix: 'coastline',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      consulate: {\r\n        name: 'Consulate',\r\n        imgUrlPrefix: 'consulate',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      favela: {\r\n        name: 'Favela',\r\n        imgUrlPrefix: 'favela',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      fortress: {\r\n        name: 'Fortress',\r\n        imgUrlPrefix: 'fortress',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      hereford: {\r\n        name: 'Hereford',\r\n        imgUrlPrefix: 'hereford',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      house: {\r\n        name: 'House',\r\n        imgUrlPrefix: 'house',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      kafe: {\r\n        name: 'Kafe Dostoyevsky',\r\n        imgUrlPrefix: 'kafe',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      kanal: {\r\n        name: 'Kanal',\r\n        imgUrlPrefix: 'kanal',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: -1, name: floorTerms.subBasement },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      oregon: {\r\n        name: 'Oregon',\r\n        imgUrlPrefix: 'oregon',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      outback: {\r\n        name: 'Outback',\r\n        imgUrlPrefix: 'outback',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      plane: {\r\n        name: 'Plane',\r\n        imgUrlPrefix: 'plane',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      skyscraper: {\r\n        name: 'Skyscraper',\r\n        imgUrlPrefix: 'skyscraper',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      themepark: {\r\n        name: 'Theme Park',\r\n        imgUrlPrefix: 'themepark',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      tower: {\r\n        name: 'Tower',\r\n        imgUrlPrefix: 'tower',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      villa: {\r\n        name: 'Villa',\r\n        imgUrlPrefix: 'villa',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 0, name: floorTerms.basement },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.roof }\r\n        ]\r\n      },\r\n      yacht: {\r\n        name: 'Yacht',\r\n        imgUrlPrefix: 'yacht',\r\n        floors: [\r\n          { index: 'bg', name: floorTerms.basement, dontSelect: true },\r\n          { index: 1, name: floorTerms.firstFloor, default: true },\r\n          { index: 2, name: floorTerms.secondFloor },\r\n          { index: 3, name: floorTerms.thirdFloor },\r\n          { index: 4, name: floorTerms.fourthFloor },\r\n          { index: 5, name: floorTerms.roof }\r\n        ]\r\n      }\r\n    };\r\n  };\r\n\r\n  return  {\r\n    getMapData: getMapData\r\n  };\r\n})();\r\n","'use strict';\r\n\r\nvar R6MMainRender = (function($,window,document,undefined) {\r\n  var SVG_WIDTH = 5000,\r\n    SVG_HEIGHT = 5000,\r\n    SVG_DIM = {\r\n      WIDTH: SVG_WIDTH,\r\n      HEIGHT: SVG_HEIGHT,\r\n      TOP_OFFSET: (SVG_HEIGHT / 2) + 12,\r\n      LEFT_OFFSET: (SVG_WIDTH / 2) - 5\r\n    };\r\n\r\n  $.fn.removeClassPrefix = function(prefix) {\r\n    this.each(function(i, el) {\r\n      var classes = el.className.split(' ').filter(function(c) {\r\n        return c.lastIndexOf(prefix, 0) !== 0;\r\n      });\r\n\r\n      el.className = $.trim(classes.join(' '));\r\n    });\r\n    return this;\r\n  };\r\n\r\n  var FLOOR_CSS_TEXT = {\r\n    '-1': 'neg-one', // bare -1 doesn't lint, but this should still work\r\n    0: 'zero',\r\n    1: 'one',\r\n    2: 'two',\r\n    3: 'three',\r\n    4: 'four',\r\n    5: 'five'\r\n  };\r\n\r\n  var getSVGMapHTML = function getSVGMapHTML(floors, imgUrlPrefix) {\r\n    var html = '',\r\n      prefix = imgUrlPrefix,\r\n      imgSrc = 'img/maps/' + prefix + '/' + prefix + '.svg';\r\n\r\n    html += '<div class=\"background loading\">';\r\n    html += '<object class=\"svgMap\" data=\"' + imgSrc + '\" type=\"image/svg+xml\"></object>';\r\n    html += '</div>';\r\n    return html;\r\n  };\r\n\r\n  var getPanelLabelHTML = function getPanelLabelHTML(floors) {\r\n    var html = '',\r\n      cssClass = '';\r\n\r\n    floors.forEach(function(floor) {\r\n      // allows to have a bg image that can't be selected as a \"floor\"\r\n      if (floor.dontSelect) {\r\n        return;\r\n      }\r\n      cssClass = FLOOR_CSS_TEXT[floor.index];\r\n      html += '<span class=\"' + cssClass + '\">' + floor.name.full + '</span>';\r\n    });\r\n    return html;\r\n  };\r\n\r\n  var getMapHTML = function getMapHTML(mapData, $mapElements, $mapPanelsLabels) {\r\n    var html = '';\r\n\r\n    html += getSVGMapHTML(mapData.floors, mapData.imgUrlPrefix);\r\n\r\n    $mapElements.html(html);\r\n    $mapPanelsLabels.html(getPanelLabelHTML(mapData.floors));\r\n  };\r\n\r\n  var createMapPanels = function createMapPanels($mapPanelsContainer, mapPanelsCount) {\r\n    var html;\r\n\r\n    for (var x = 0; x < mapPanelsCount; x++) {\r\n      html = '';\r\n      html += '<div class=\"map-container\">';\r\n      html += '<div class=\"helper-border vertical\"></div>';\r\n      html += '<div class=\"helper-border horizontal\"></div>';\r\n      html += '<p class=\"map-panel-label\"></p>';\r\n      html += '<div class=\"map-main\">';\r\n      html += '<div class=\"center-helper\">';\r\n      html += '<div class=\"map-elements\"></div>';\r\n      html += '<div class=\"svg-wrapper drawing-markers\"></div>';\r\n      html += '<div class=\"svg-wrapper map\"></div>';\r\n      html += '</div>'; // end center-helper\r\n      html += '</div>'; // end map-main\r\n      html += '</div>'; // end map-container\r\n      $mapPanelsContainer.append(html);\r\n    }\r\n  };\r\n\r\n  var showFloor = function showFloor(\r\n    selectedFloorIndex,\r\n    $mapPanelsContainer,\r\n    $mapContainer,\r\n    minFloorIndex,\r\n    maxFloorIndex\r\n  ) {\r\n    $mapPanelsContainer.attr('selected-floor-index', selectedFloorIndex);\r\n    var mapPanelsCount = $mapPanelsContainer.attr('map-panels-count');\r\n\r\n    if (mapPanelsCount > 2)  {\r\n      selectedFloorIndex = Math.max(minFloorIndex, selectedFloorIndex - 1);\r\n    }\r\n    var tempMinIndex = Math.max(minFloorIndex, maxFloorIndex - mapPanelsCount + 1),\r\n      startingIndex = Math.min(tempMinIndex, selectedFloorIndex);\r\n\r\n    $mapContainer.each(function(index, map) {\r\n      $(map).attr('show-floor-index', Math.min(startingIndex, maxFloorIndex));\r\n      startingIndex++;\r\n    });\r\n  };\r\n\r\n  var showObjective = function showObjective(objective, $mapElements) {\r\n    var objectivePrefix = 'show-objective-';\r\n\r\n    $mapElements.removeClassPrefix(objectivePrefix);\r\n    $mapElements.addClass(objectivePrefix + objective);\r\n  };\r\n\r\n  return  {\r\n    getMapHTML: getMapHTML,\r\n    createMapPanels: createMapPanels,\r\n    showFloor: showFloor,\r\n    showObjective: showObjective,\r\n    SVG_DIM: SVG_DIM\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\nvar R6MMainControls = (function($, window, document, undefined) {\r\n  var $mapControl = $('#map-control'),\r\n    $floorControl = $('#floor-control'),\r\n    $zoomControl = $('#zoom-range'),\r\n    $menuControl = $('#mmenu-link'),\r\n    $mapPanelsCountControl,\r\n    $fullScreenControl,\r\n    $menuMapSelectionControl,\r\n    $menuPanel = $('#menu-panel'),\r\n    SELECTED_CLASS = 'selected',\r\n    ZOOMED_IN_FAR_CLASS = 'zoomed-in-far',\r\n    ZOOMED_OUT_FAR_CLASS = 'zoomed-out-far',\r\n    MAP_LAYERS = [\r\n      {short: 'bmb', full: 'Bomb'},\r\n      {short: 'sec', full: 'Secure'},\r\n      {short: 'hst', full: 'Hostage'},\r\n      {short: 'fh', full: 'Floor hatch'},\r\n      {short: 'ch', full: 'Ceiling hatch'},\r\n      {short: 'bw', full: 'Breakable wall'},\r\n      {short: 'losf', full: 'Line of sight floor'},\r\n      {short: 'sl', full: 'Skylight'},\r\n      {short: 'dt', full: 'Drone tunnel'},\r\n      {short: 'cam', full: 'Security camera'},\r\n      {short: 'ld', full: 'Ladder'},\r\n      {short: 'ip', full: 'Insertion point'},\r\n      {short: 'txt', full: 'Label'},\r\n      {short: 'cmp', full: 'Compass'},\r\n      {short: 'lg', full: 'Legend'}\r\n    ];\r\n\r\n  var disableFullScreen = function disableFullScreen() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    } else if (document.webkitCancelFullScreen) {\r\n      document.webkitCancelFullScreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.msExitFullscreen) {\r\n      document.msExitFullscreen();\r\n    }\r\n  };\r\n\r\n  var enableFullScreen = function enableFunctionScreen() {\r\n    var rootEl = document.documentElement;\r\n\r\n    if (rootEl.requestFullscreen) {\r\n      rootEl.requestFullscreen();\r\n    } else if (rootEl.webkitRequestFullscreen) {\r\n      rootEl.webkitRequestFullscreen();\r\n    } else if (rootEl.webkitEnterFullscreen) {\r\n      rootEl.webkitEnterFullscreen();\r\n    } else if (rootEl.mozRequestFullScreen) {\r\n      rootEl.mozRequestFullScreen();\r\n    } else if (rootEl.msRequestFullscreen) {\r\n      rootEl.msRequestFullscreen();\r\n    }\r\n  };\r\n\r\n  var getSelectedFloor = function getSelectedFloor() {\r\n    return $floorControl.find('.selected').data('index');\r\n  };\r\n\r\n  var getMinMaxFloor = function getMinMaxFloor() { // TO DO CHANGE TO MAX FLOOR INDEX\r\n    var $floorInputs = $floorControl.find('button');\r\n\r\n    return {\r\n      min: $($floorInputs[0]).data('index'),\r\n      max: $($floorInputs[$floorInputs.length - 1]).data('index')\r\n    };\r\n  };\r\n\r\n  var getFloorButtonsHTML = function getFloorButtonsHTML(floors) {\r\n    var buttonsAsString = '',\r\n      classes = '',\r\n      tooltip = '',\r\n      initalFloor = getSelectedFloor();\r\n\r\n    floors.forEach(function(floor) {\r\n      // allows to have a bg image that can't be selected as a \"floor\"\r\n      if (floor.dontSelect) {\r\n        return;\r\n      }\r\n      classes = '';\r\n      classes += (floor.default) ? SELECTED_CLASS : '';\r\n      tooltip = getFloorTooltip(floor.index);\r\n      buttonsAsString += '<button data-index=\"' + floor.index + '\" class=\"' + classes + '\" title=\"' + tooltip + '\">';\r\n      buttonsAsString += '<span class=\"short\">' + floor.name.short + '</span>';\r\n      buttonsAsString += '<span class=\"full\">' + floor.name.full + '</span>';\r\n      buttonsAsString += '</button>';\r\n    });\r\n    $floorControl.html(buttonsAsString);\r\n    setSelectedFloor(initalFloor);\r\n  };\r\n\r\n  var setFloorsChangeEventAndHotkeys = function setFloorsChangeEventAndHotkeys(handleChangeCallback, showSelectedFloorFn) {\r\n    setupFloorChangeEvent(handleChangeCallback);\r\n    setupFloorHotkeys(showSelectedFloorFn);\r\n  };\r\n\r\n  var setSelectedFloor = function setSelectedFloor(floorIndex) {\r\n    var $selectedFloor = $floorControl.find(\"[data-index='\" + floorIndex + \"']\");\r\n\r\n    if ($selectedFloor.length) {\r\n      resetSelectedFloor();\r\n      $selectedFloor.addClass(SELECTED_CLASS);\r\n      $selectedFloor.trigger('click');\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  var getFloorTooltip = function getFloorTooltip(floorIndex) {\r\n    var shortcutTip = 'Shortcut: {shortcut}';\r\n\r\n    if (floorIndex == 0) {\r\n      return shortcutTip.replace('{shortcut}',\"'0' or '~'\");\r\n    } else {\r\n      return shortcutTip.replace('{shortcut}',floorIndex);\r\n    }\r\n  };\r\n\r\n  var getHandleHotkeyFn = function getHandleHotkeyFn(showSelectedFloorFn) {\r\n    return function handleHotKey(e) {\r\n      var keyCode = e.which;\r\n\r\n      if (keyCode >= 48 && keyCode <= 53) {  // '0' through '1'\r\n        if (setSelectedFloor(keyCode - 48)) {\r\n          showSelectedFloorFn();\r\n        }\r\n      } else if (keyCode == 192) { // '`'\r\n        if (setSelectedFloor(0)) {\r\n          showSelectedFloorFn();\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n\r\n  var getHandlePanZoomChangeFn = function getHandlePanZoomChangeFn($mapMains) {\r\n    return function handlePanZoomChange(event, panzoom, transform) {\r\n      if (getDisplayValue('lfa')) {\r\n        $mapMains.each(function(index, map) {\r\n          if (map !== event.target) {\r\n            $(map).panzoom('pan', transform[4], transform[5], {silent: true});\r\n          }\r\n        });\r\n      }\r\n    };\r\n  };\r\n\r\n  var getHandleZoomChangeFn = function getHandleZoomChangeFn($mapElements) {\r\n    return function handleZoomChange() {\r\n      var zoomVal = $zoomControl.val();\r\n\r\n      if ( zoomVal > 1.6) {\r\n        $mapElements.addClass(ZOOMED_IN_FAR_CLASS);\r\n      } else if ( zoomVal < 0.4 ) {\r\n        $mapElements.addClass(ZOOMED_OUT_FAR_CLASS);\r\n      } else {\r\n        $mapElements.removeClass(ZOOMED_IN_FAR_CLASS);\r\n        $mapElements.removeClass(ZOOMED_OUT_FAR_CLASS);\r\n      }\r\n    };\r\n  };\r\n\r\n  var getDisplayValue = function getDisplayValue(key) {\r\n    return $('#option-' + key).is(':checked');\r\n  };\r\n\r\n  var getMenuR6MapsHtml = function getMenuR6MapsHtml() {\r\n    var html = '';\r\n\r\n    html += '<div class=\"mmenu-custom-panel\">';\r\n    html += '<h2>r6calls.com</h2>';\r\n    html += '<button id=\"menu-map-selection\">Select a map</button>';\r\n    html += '<br>';\r\n    if (isFullScreenAvailable()) {\r\n      html += '<button href=\"\" id=\"full-screen\">Full screen</button>';\r\n      html += '<br>';\r\n    }\r\n    html += '<a class=\"menu-item\" id=\"menu-about\" href=\"about/about.html\">About</a>';\r\n    html += '</div>';\r\n    return html;\r\n  };\r\n\r\n  var getMenuOptionsHtml = function getMenuOptionsHtml() {\r\n    var html = '';\r\n\r\n    html += '<div id=\"options-wrapper\" class=\"mmenu-custom-panel\">';\r\n    html += '<h2>Options</h2>';\r\n\r\n    html += '<div class=\"map-panels-count-control\">';\r\n    html += '<label>Number of floors to display:</label>';\r\n    html += '<select id=\"map-pane-count\">';\r\n    html += '<option value=\"1\">1 - Full</option>';\r\n    html += '<option value=\"2\">2 - Split</option>';\r\n    html += '<option value=\"4\">4 - Grid</option>';\r\n    html += '</select>';\r\n\r\n    html += '<div id=\"lock-container\">';\r\n    html += '<div class=\"checkbox-wrapper\">';\r\n    html += '<input type=\"checkbox\" checked=\"checked\" id=\"option-lfa\">Lock floor alignment</input>';\r\n    html += '</div>';\r\n    html += '</div>';\r\n\r\n    html += '</div>';\r\n\r\n    html += '<label>Elements to display:</label>';\r\n    html += '<div class=\"checkbox-wrapper\">';\r\n    MAP_LAYERS.forEach(function(layer) {\r\n      html += '<div class=\"checkbox-item\">';\r\n      html += '<img class=\"legend-icon\" src=\"./img/legend/' + layer.short + '.png\"><input type=\"checkbox\" checked=\"checked\" id=\"option-' + layer.short + '\">' + layer.full + '</input><br>';\r\n      html += '</div>';\r\n    });\r\n    html += '</div>';\r\n\r\n    html += '</div>';\r\n\r\n    return html;\r\n  };\r\n\r\n  var handlePanZoomEnd = function handlePanZoomEnd() {\r\n    $zoomControl.trigger('input');\r\n  };\r\n\r\n  var isCurrentlyFullScreen = function isCurrentlyFullScreen() {\r\n    return (\r\n      document.fullscreenElement ||\r\n      document.webkitFullscreenElement ||\r\n      document.webkitCurrentFullScreenElement ||\r\n      document.mozFullScreenElement ||\r\n      document.msFullscreenElement\r\n    );\r\n  };\r\n\r\n  var isFullScreenAvailable = function isFullScreenAvailable() {\r\n    return (\r\n      document.fullscreenEnabled ||\r\n      document.webkitFullscreenEnabled ||\r\n      document.webkitCancelFullScreen ||\r\n      document.mozFullScreenEnabled ||\r\n      document.msFullscreenEnabled\r\n    );\r\n  };\r\n\r\n  var setMapChangeEvent = function setMapChangeEvent(callback) {\r\n    $mapControl.on('change', callback);\r\n  };\r\n\r\n  var setMapPanelsCountChangeEvent = function setMapPanelsCountChangeEvent(callback) {\r\n    $mapPanelsCountControl.on('change', function(event) {\r\n      var mapPanelsCount = $mapPanelsCountControl.val();\r\n\r\n      showLockControls(mapPanelsCount);\r\n      callback(mapPanelsCount);\r\n    });\r\n  };\r\n\r\n  var getSelectedMap = function getSelectedMap() {\r\n    return $mapControl.val();\r\n  };\r\n\r\n  var createMapCombo = function createMapCombo(mapData) {\r\n    var optionsAsString = '',\r\n      maps = [],\r\n      mapName = getSelectedMap();\r\n\r\n    for (var mapKey in mapData) {\r\n      if (mapData.hasOwnProperty(mapKey)) {\r\n        maps.push({ key: mapKey, name: mapData[mapKey].name });\r\n      }\r\n    }\r\n\r\n    maps.sort(function(a,b) {\r\n      if (a.name < b.name) {\r\n        return -1;\r\n      }\r\n      if (a.name > b.name) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n    maps.forEach(function(map) {\r\n      optionsAsString += '<option value=\"' + map.key + '\">' + map.name + '</option>';\r\n    });\r\n\r\n    $mapControl.html(optionsAsString);\r\n    setSelectedMap(mapName);\r\n  };\r\n\r\n  var setOption = function setOption($selectEl, optionName) {\r\n    var $option = $selectEl.find('option[value=\"' + optionName + '\"]');\r\n\r\n    if ($option.length) {\r\n      $option.prop('selected', true);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  var setSelectedMap = function setSelectedMap(mapName) {\r\n    return setOption($mapControl, mapName);\r\n  };\r\n\r\n  var getMenuHTML = function getMenuHTML() {\r\n    var html = '';\r\n\r\n    html += getMenuR6MapsHtml();\r\n    html += getMenuOptionsHtml();\r\n    html += '<div class=\"faded-logo\"></div>';\r\n    $menuPanel.html(html);\r\n\r\n    $menuControl.find('.menu-text').html('Menu');\r\n    $mapPanelsCountControl = $('#map-pane-count');\r\n    $fullScreenControl = $('#full-screen');\r\n    $menuMapSelectionControl = $('#menu-map-selection');\r\n  };\r\n\r\n  var setMenuFullScreenClickEvent = function setMenuFullScreenClickEvent() {\r\n    if ($fullScreenControl) {\r\n      $fullScreenControl.on('click', toggleFullScreen);\r\n    }\r\n  };\r\n\r\n  var setMenuSelectMapClickEvent = function setMenuSelectMapClickEvent(\r\n    showSelectMapCallback,\r\n    closeMenuCallback\r\n  ) {\r\n    $menuMapSelectionControl.on('click', function(event) {\r\n      event.preventDefault();\r\n      showSelectMapCallback();\r\n      closeMenuCallback();\r\n    });\r\n  };\r\n\r\n  var resetPan = function resetPan($mapMains, getResetDimensions) {\r\n    var resetDimensions = getResetDimensions();\r\n\r\n    $mapMains.panzoom(\r\n      'pan',\r\n      -resetDimensions.centerLeft * resetDimensions.zoomValue,\r\n      -resetDimensions.centerTop * resetDimensions.zoomValue\r\n    );\r\n  };\r\n\r\n  var setBackgroundTopLeft = function setBackgroundTopLeft(key) {\r\n    var i;\r\n\r\n    var svgMaps = document.getElementsByClassName('svgMap');\r\n\r\n    for (i = 0; i < svgMaps.length; i++) {\r\n      var svgObject = svgMaps[i].getSVGDocument();\r\n\r\n      if (svgObject) {\r\n        var mainSVG = svgObject.getElementById('mainSVG');\r\n        var top = -1 * mainSVG.getAttribute('height') / 2;\r\n        var left = -1 * mainSVG.getAttribute('width') / 2;\r\n\r\n        svgMaps[i].parentElement.style.top = top + 'px';\r\n        svgMaps[i].parentElement.style.left = left + 'px';\r\n      }\r\n    };\r\n  };\r\n\r\n  var setLayerDisplay = function setLayerDisplay(key) {\r\n    var visible = getDisplayValue(key),\r\n      i, j;\r\n    var svgMaps = document.getElementsByClassName('svgMap');\r\n\r\n    for (i = 0; i < svgMaps.length; i++) {\r\n      var svgObject = svgMaps[i].getSVGDocument();\r\n\r\n      if (svgObject) {\r\n        for (j = -2; j < 5; j++) {\r\n          var layer = svgObject.getElementById(j + '-' + key);\r\n\r\n          if (j == -2 ) {\r\n            layer = svgObject.getElementById('bg-' + key);\r\n          }\r\n          if (layer) {\r\n            if (visible) {\r\n              layer.style.display = 'inline';\r\n            } else {\r\n              layer.style.display = 'none';\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n  var setFoorDisplay = function setFoorDisplay(floorNumber) {\r\n    var minMaxFloor = getMinMaxFloor(),\r\n      svgMaps = document.getElementsByClassName('svgMap'),\r\n      selectedFloorNumber = floorNumber,\r\n      currentFloor,\r\n      i,\r\n      j;\r\n\r\n    var mapPanelsCount = $('#map-panels-container').attr('map-panels-count');\r\n\r\n    if (mapPanelsCount > 2)  {\r\n      selectedFloorNumber = Math.max(minMaxFloor.min, selectedFloorNumber - 1);\r\n    }\r\n    var tempMinIndex = Math.max(minMaxFloor.min, minMaxFloor.max - mapPanelsCount + 1),\r\n      currentFloor = Math.min(tempMinIndex, selectedFloorNumber);\r\n\r\n    for (i = 0; i < svgMaps.length; i++) {\r\n      var svgObject = svgMaps[i].getSVGDocument();\r\n\r\n      if (svgObject) {\r\n        for (j = -1; j < 5; j++) {\r\n          var layer = svgObject.getElementById('Floor ' + j);\r\n\r\n          if (layer) {\r\n            if (j == currentFloor) {\r\n              layer.style.display = 'inline';\r\n            } else {\r\n              layer.style.display = 'none';\r\n            }\r\n          }\r\n        }\r\n      }\r\n      currentFloor++;\r\n    };\r\n  };\r\n\r\n  var setMenuCheckboxOption = function setMenuCheckboxOption(key, isChecked) {\r\n    var boolValue = (isChecked === 'true') ? true : false;\r\n\r\n    $('#option-' + key).prop('checked', boolValue);\r\n  };\r\n\r\n  var setMenuCheckboxChangeEvent = function setMenuCheckboxChangeEvent(key, callback) {\r\n    $('#option-' + key).change(function(e) {\r\n      setLayerDisplay(key);\r\n      callback(key, getDisplayValue(key));\r\n    });\r\n  };\r\n\r\n  var resetSelectedFloor = function resetSelectedFloor() {\r\n    $floorControl.find('.' + SELECTED_CLASS + '').removeClass(SELECTED_CLASS);\r\n  };\r\n\r\n  var setupFloorChangeEvent = function setupFloorChangeEvent(callback) {\r\n    $floorControl.on('click', 'button', function(e) {\r\n      var floorButton =  (e.target.tagName == 'SPAN')\r\n        ? $(e.target).parent()\r\n        : $(e.target);\r\n\r\n      resetSelectedFloor();\r\n      floorButton.addClass(SELECTED_CLASS);\r\n      setFoorDisplay(e.currentTarget.getAttribute('data-index'));\r\n      callback();\r\n    });\r\n  };\r\n\r\n  var setupFloorHotkeys = function setupFloorHotkeys(showSelectedFloorFn) {\r\n    $(document).on('keydown', getHandleHotkeyFn(showSelectedFloorFn));\r\n  };\r\n\r\n  var setPanZoom = function setPanZoom($mapMains, $mapContainer, $mapElements) {\r\n    $mapMains.panzoom({\r\n      $zoomRange: $zoomControl,\r\n      minScale: 0.3,\r\n      maxScale: 2.5\r\n    });\r\n\r\n    $mapContainer.on('mousewheel', function(event) {\r\n      $zoomControl.val(+$zoomControl.val() + (event.deltaY * 0.06));\r\n      $zoomControl.trigger('input');\r\n      //$zoomControl.trigger('change'); // todo: needed??\r\n    });\r\n\r\n    $zoomControl.on('change', getHandleZoomChangeFn($mapElements));\r\n    $zoomControl.on('input', getHandleZoomChangeFn($mapElements));\r\n\r\n    // camera links were not working on touch devices:\r\n    $mapMains.on('touchstart','a', function(e) {\r\n      $(this).addClass('hover');\r\n    });\r\n\r\n    $mapMains.on('touchend','a', function(e) {\r\n      $(this).removeClass('hover');\r\n      this.click();\r\n    });\r\n\r\n    $mapMains.on('panzoomchange', getHandlePanZoomChangeFn($mapMains));\r\n    $mapMains.on('panzoomend', handlePanZoomEnd);\r\n  };\r\n\r\n  var toggleFullScreen = function toggleFullScreen() {\r\n    if (isCurrentlyFullScreen()) {\r\n      disableFullScreen();\r\n    } else {\r\n      enableFullScreen();\r\n    }\r\n  };\r\n\r\n  var setSelectedMapPanel = function setSelectedMapPanel(number) {\r\n    var result = setOption($mapPanelsCountControl, number);\r\n\r\n    $mapPanelsCountControl.trigger('change');\r\n    return result;\r\n  };\r\n\r\n  var showLockControls = function showLockControls(panelsCount) {\r\n    var $lockWrapper = $('#lock-container');\r\n\r\n    if (panelsCount > 1) {\r\n      $lockWrapper.show(600);\r\n    } else {\r\n      $lockWrapper.hide(600);\r\n    }\r\n  };\r\n\r\n  var disableZoom = function disableZoom($mapElements) {\r\n    $mapElements.panzoom('disable');\r\n  };\r\n\r\n  var enableZoom = function enableZoom($mapElements) {\r\n    $mapElements.panzoom('enable');\r\n  };\r\n\r\n  var isZoomed = function isZoomed() {\r\n    return ($zoomControl.val() != 1);\r\n  };\r\n\r\n  var resetZoom = function resetZoom($mapMains, getResetDimensions) {\r\n    var resetDimensions = getResetDimensions();\r\n\r\n    $zoomControl.val(resetDimensions.zoomValue);\r\n    $zoomControl.trigger('input');\r\n  };\r\n\r\n  return  {\r\n    // floor\r\n    getSelectedFloor: getSelectedFloor,\r\n    getMinMaxFloor: getMinMaxFloor,\r\n    getFloorButtonsHTML: getFloorButtonsHTML,\r\n    setFloorsChangeEventAndHotkeys: setFloorsChangeEventAndHotkeys,\r\n    setSelectedFloor: setSelectedFloor,\r\n    // mapPanel\r\n    setMapPanelsCountChangeEvent: setMapPanelsCountChangeEvent,\r\n    setSelectedMapPanel: setSelectedMapPanel,\r\n    // map\r\n    getSelectedMap: getSelectedMap,\r\n    createMapCombo: createMapCombo,\r\n    setMapChangeEvent: setMapChangeEvent,\r\n    setSelectedMap: setSelectedMap,\r\n    // menu\r\n    getMenuHTML: getMenuHTML,\r\n    setMenuFullScreenClickEvent: setMenuFullScreenClickEvent,\r\n    setMenuSelectMapClickEvent: setMenuSelectMapClickEvent,\r\n    setMenuCheckboxOption: setMenuCheckboxOption,\r\n    setMenuCheckboxChangeEvent: setMenuCheckboxChangeEvent,\r\n    // display\r\n    setLayerDisplay: setLayerDisplay,\r\n    setFoorDisplay: setFoorDisplay,\r\n    setBackgroundTopLeft: setBackgroundTopLeft,\r\n    MAP_LAYERS: MAP_LAYERS,\r\n    // pan\r\n    resetPan: resetPan,\r\n    // zoom\r\n    disableZoom: disableZoom,\r\n    enableZoom: enableZoom,\r\n    isZoomed: isZoomed,\r\n    resetZoom: resetZoom,\r\n    setPanZoom: setPanZoom\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\nvar MIN_COLUMN_NUM = 2,\r\n  MAX_COLUMN_NUM = 10,\r\n  NATIVE_THUMB_IMG_WIDTH = 495,\r\n  NATIVE_THUMB_IMG_HEIGHT = 278,\r\n  NATIVE_THUMB_IMG_RATIO = NATIVE_THUMB_IMG_WIDTH / NATIVE_THUMB_IMG_HEIGHT,\r\n  VIEWPORT_PADDING_HEIGHT = 10,\r\n  VIEWPORT_PADDING_WIDTH = 15,\r\n  MAP_LINK_TOTAL_BORDER_SIZE = 2,\r\n  MIN_MAP_LINK_WIDTH = 100,\r\n  THUMB_SCALE_ZOOMED_IN_FACTOR = 1.25;\r\n\r\nvar R6MMainMapSelectionGrid = (function($, window, document, undefined) {\r\n  var getBackgroundImgScale = function getBackgroundImgScale(thumbDimensions) {\r\n    return Math.max(\r\n      thumbDimensions.height / (NATIVE_THUMB_IMG_HEIGHT - 1),\r\n      thumbDimensions.width / (NATIVE_THUMB_IMG_WIDTH - 1) // -1 helps ensure rounding doesn't lose a pixel\r\n    );\r\n  };\r\n\r\n  var getColumnCounts = function getColumnCounts(numThumbs){\r\n    var result = [],\r\n      numThumbsLastRow;\r\n\r\n    for (var columnCount = MIN_COLUMN_NUM; columnCount <= MAX_COLUMN_NUM; columnCount++) {\r\n      numThumbsLastRow = (numThumbs % columnCount);\r\n      if (\r\n        ((numThumbsLastRow * 2) >= columnCount) ||\r\n          ((columnCount - numThumbsLastRow) < 3 )\r\n      ) {\r\n        result.push(columnCount);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  var getMapGridHTML = function getMapGridHTML(mapData) {\r\n    var maps = [],\r\n      html = '<ul>';\r\n\r\n    for (var mapKey in mapData) {\r\n      if (mapData.hasOwnProperty(mapKey)) {\r\n        maps.push({ key: mapKey, name: mapData[mapKey].name, imgUrlPrefix: mapData[mapKey].imgUrlPrefix });\r\n      }\r\n    }\r\n\r\n    maps.sort(function(a,b) {\r\n      if (a.name < b.name) {\r\n        return -1;\r\n      }\r\n      if (a.name > b.name) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    });\r\n\r\n    maps.forEach(function(map) {\r\n      html += '<li data-key=\"' + map.key + '\">';\r\n      html += '<a href=\"\" class=\"' + map.key + '\">';\r\n      html += '<div class=\"wrapper absolute thumb\"><div class=\"image thumb\" style=\"background-image: url(./img/maps/' + map.imgUrlPrefix + '/' + map.imgUrlPrefix + '.webp);\"></div></div>';\r\n      html += '<div class=\"wrapper absolute spinner loading\"><div>';\r\n      html += '</div></div>';\r\n      html += '<p>' + map.name + '</p>';\r\n      html += '</a>';\r\n      html += '</li>';\r\n    });\r\n\r\n    html += '</ul>';\r\n    return html;\r\n  };\r\n\r\n  var getMapLinkMarginVertical = function getMapLinkMarginVertical(availableWidth) {\r\n    return Math.max(Math.min(Math.floor(availableWidth / 100), 10), 20);\r\n  };\r\n\r\n  var getOptimalDimensions = function getOptimalDimensions(\r\n    columnCountsToConsider,\r\n    mapLinkCount,\r\n    availableWidth,\r\n    availableHeight\r\n  ) {\r\n    var results = {};\r\n\r\n    columnCountsToConsider.forEach(function(columnCount) {\r\n      var rowCount = Math.ceil(mapLinkCount / columnCount),\r\n        mapLinkWidth = Math.floor(availableWidth / columnCount),\r\n        mapLinkHeight = Math.floor(availableHeight / rowCount),\r\n        mapLinkRatio = mapLinkWidth / mapLinkHeight;\r\n\r\n      if (\r\n        (\r\n          !results.ratio\r\n          || (Math.abs(NATIVE_THUMB_IMG_RATIO - results.ratio) > Math.abs(NATIVE_THUMB_IMG_RATIO - mapLinkRatio))\r\n        ) &&\r\n        mapLinkWidth >= MIN_MAP_LINK_WIDTH\r\n      ) {\r\n        var mapLinkMarginVertical = getMapLinkMarginVertical(availableWidth), // determined experimentally\r\n          mapLinkMarginHorizontal = Math.round(mapLinkMarginVertical / 2);\r\n\r\n        $.extend(results, {\r\n          _debugColumnCount: columnCount,\r\n          _debugRowCount: rowCount,\r\n          _debugAvailableWidth: availableWidth,\r\n          _debugAvailableHeight: availableHeight,\r\n          ratio: mapLinkRatio,\r\n          width: mapLinkWidth - MAP_LINK_TOTAL_BORDER_SIZE - (mapLinkMarginHorizontal * 2),\r\n          height: mapLinkHeight - MAP_LINK_TOTAL_BORDER_SIZE - (mapLinkMarginVertical),\r\n          marginVertical: mapLinkMarginVertical,\r\n          marginHorizontal: mapLinkMarginHorizontal\r\n        });\r\n      }\r\n    });\r\n    return results;\r\n  };\r\n\r\n  var getViewportDimensions = function getViewportDimensions() {\r\n    return {\r\n      height: $(window).height(),\r\n      width: $(window).width()\r\n    };\r\n  };\r\n\r\n  var resizeMapLinks = function resizeMapLinks(\r\n    $selectMapGrid,\r\n    $mapLinks,\r\n    $mainNav\r\n  ) {\r\n    var viewportDimensions = getViewportDimensions(),\r\n      navHeight = $mainNav.height(),\r\n      mapLinkCount = $mapLinks.length,\r\n      columnCounts = getColumnCounts(mapLinkCount),\r\n      availableHeight = viewportDimensions.height - navHeight - VIEWPORT_PADDING_HEIGHT,\r\n      availableWidth = viewportDimensions.width - VIEWPORT_PADDING_WIDTH,\r\n      mapLinkDimensions = getOptimalDimensions(\r\n        columnCounts,\r\n        mapLinkCount,\r\n        availableWidth,\r\n        availableHeight\r\n      ),\r\n      thumbImgScale = getBackgroundImgScale(mapLinkDimensions),\r\n      $spinners = $mapLinks.find('.spinner');\r\n\r\n    $selectMapGrid.css('padding-top', (navHeight + VIEWPORT_PADDING_HEIGHT) + 'px');\r\n    $mapLinks.height(mapLinkDimensions.height);\r\n    $mapLinks.width(mapLinkDimensions.width);\r\n    $mapLinks.css(\r\n      'margin',\r\n      '0 ' + mapLinkDimensions.marginHorizontal + 'px ' + mapLinkDimensions.marginVertical + 'px ' + mapLinkDimensions.marginHorizontal + 'px'\r\n    );\r\n    $spinners.css('background-size', (Math.min(mapLinkDimensions.height, mapLinkDimensions.width) - 20) + 'px');\r\n\r\n    setTransformScale(\r\n      $mapLinks.find('div.image.thumb'),\r\n      thumbImgScale\r\n    );\r\n\r\n    $mapLinks.hover(function(event) {\r\n      setTransformScale(\r\n        $(event.target).closest('li').find('div.image.thumb'),\r\n        thumbImgScale * THUMB_SCALE_ZOOMED_IN_FACTOR\r\n      );\r\n    }, function(event) {\r\n      setTransformScale(\r\n        $(event.target).closest('li').find('div.image.thumb'),\r\n        thumbImgScale\r\n      );\r\n    });\r\n  };\r\n\r\n  var setTransformScale = function setTransformScale(element, scale) {\r\n    element.css('-ms-transform', 'scale(' + scale + ')');\r\n    element.css('-webkit-transform', 'scale(' + scale + ')');\r\n    element.css('transform', 'scale(' + scale + ')');\r\n  };\r\n\r\n  var createMapSelectionGrid = function createMapSelectionGrid(\r\n    $selectMapGrid,\r\n    $heading,\r\n    $mainNav,\r\n    mapData,\r\n    showSelectedMapCallback,\r\n    hideMapSelectionGridCallback\r\n  ) {\r\n    $heading.text('Select a map');\r\n    $selectMapGrid.html(getMapGridHTML(mapData));\r\n    $selectMapGrid.on('click', 'a', function(event) {\r\n      event.preventDefault();\r\n      showSelectedMapCallback($(event.target).closest('li').data('key'));\r\n    });\r\n    $selectMapGrid.on('click', hideMapSelectionGridCallback);\r\n\r\n    var handleResize = function handleResize() {\r\n      resizeMapLinks(\r\n        $selectMapGrid,\r\n        $selectMapGrid.find('a'),\r\n        $mainNav\r\n      );\r\n    };\r\n\r\n    handleResize();\r\n    $(window).on('resize', handleResize);\r\n    setTimeout(function() {\r\n      $selectMapGrid.addClass('enable-thumb-transition');\r\n    }, 1);\r\n\r\n    $('<img/>').attr('src', 'img/map-thumbs.jpg').load(function() {\r\n      $(this).remove(); // prevent memory leaks\r\n      $selectMapGrid.find('.spinner').removeClass('loading');\r\n    });\r\n  };\r\n\r\n  return  {\r\n    createMapSelectionGrid: createMapSelectionGrid\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\nvar PING_MARKER_RADIUS = 10,\r\n  MIN_PING_MARKER_RADIUS = 7,\r\n  MAX_PING_MARKER_RADIUS = 16,\r\n  PING_MARKER_BORDER_PERCENT = 0.2,\r\n  MIN_PING_MARKER_BORDER = 1,\r\n  refreshPings = function() { };\r\n\r\nvar R6MMainDrawing = (function($, window, document, undefined) {\r\n  var getHandleTapFn = function getHandleTapFn(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $pingMarkersVertical,\r\n    $pingMarkersHorizontal,\r\n    $pingMarkersOtherFloor,\r\n    SVG_DIM\r\n  ) {\r\n    return function handleTap(event) {\r\n      var $mapWrapper =  $(event.target).closest('.map-container'),\r\n        pingPosition = getPingPosition(event.center.x, event.center.y, $mapWrapper),\r\n        newX = pingPosition.x,\r\n        newY = pingPosition.y,\r\n        originFloorIndex = $mapWrapper.attr('show-floor-index');\r\n\r\n      movePingMarkers(\r\n        $pingMarkers,\r\n        $pingMarkerAccents,\r\n        $pingMarkersVertical,\r\n        $pingMarkersHorizontal,\r\n        $pingMarkersOtherFloor,\r\n        newX + SVG_DIM.LEFT_OFFSET,\r\n        newY + SVG_DIM.TOP_OFFSET,\r\n        originFloorIndex\r\n      );\r\n    };\r\n  };\r\n\r\n  var getHidePingMarkersFn = function getHidePingMarkersFn(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $pingMarkersVertical,\r\n    $pingMarkersHorizontal,\r\n    $pingMarkersOtherFloor\r\n  ) {\r\n    return function hidePingMarkers() {\r\n      movePingMarkers(\r\n        $pingMarkers,\r\n        $pingMarkerAccents,\r\n        $pingMarkersVertical,\r\n        $pingMarkersHorizontal,\r\n        $pingMarkersOtherFloor,\r\n        -10000,\r\n        -10000\r\n      );\r\n    };\r\n  };\r\n\r\n  var getPingPosition = function getPingPosition(x, y, mapWrapper) {\r\n    var centerX = mapWrapper.offset().left + (mapWrapper.width() / 2),\r\n      centerY = mapWrapper.offset().top + (mapWrapper.height() / 2),\r\n      $mapMain = mapWrapper.find('.map-main'),\r\n      transforms = $mapMain.panzoom('getMatrix'),\r\n      transformX = parseInt(transforms[4]),\r\n      transformY = parseInt(transforms[5]),\r\n      scale = transforms[0];\r\n\r\n    return {\r\n      x: Math.round((x - centerX - transformX) / scale),\r\n      y: Math.round((y - centerY - transformY) / scale)\r\n    };\r\n  };\r\n\r\n  var getResizePingMarkersFn = function getResizePingMarkersFn(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $mapMains,\r\n    $pingMarkersOtherFloor\r\n  ) {\r\n    return function $resizePingMarkers() {\r\n      var scale = $($mapMains[0]).panzoom('getMatrix')[0],\r\n        radius = Math.round(PING_MARKER_RADIUS / scale),\r\n        radius = Math.max(MIN_PING_MARKER_RADIUS, radius),\r\n        radius = Math.min(MAX_PING_MARKER_RADIUS, radius),\r\n        strokeWidth = Math.max(MIN_PING_MARKER_BORDER, Math.floor(radius * PING_MARKER_BORDER_PERCENT));\r\n\r\n      radius -= strokeWidth;\r\n      $pingMarkers.attr('r', radius);\r\n      $pingMarkerAccents.attr('r', radius * 2);\r\n      $pingMarkers.attr('stroke-width', strokeWidth);\r\n      $pingMarkersOtherFloor.attr('stroke-width', strokeWidth);\r\n    };\r\n  };\r\n\r\n  var movePingMarkers = function movePingMarkers(\r\n    $pingMarkers,\r\n    $pingMarkerAccents,\r\n    $pingMarkersVertical,\r\n    $pingMarkersHorizontal,\r\n    $pingMarkersOtherFloor,\r\n    x,\r\n    y,\r\n    originFloorIndex\r\n  ) {\r\n    $pingMarkers.attr('cx', x);\r\n    $pingMarkers.attr('cy', y);\r\n    $pingMarkerAccents.attr('cx', x);\r\n    $pingMarkerAccents.attr('cy', y);\r\n    $pingMarkersVertical.attr('x1', x);\r\n    $pingMarkersVertical.attr('x2', x);\r\n    $pingMarkersHorizontal.attr('y1', y);\r\n    $pingMarkersHorizontal.attr('y2', y);\r\n\r\n    refreshPings = function refreshPings() {\r\n      $.each($pingMarkersOtherFloor, function(index, otherFloorMarker) {\r\n        var $marker = $(otherFloorMarker);\r\n        var currentFloorIndex = $marker.closest('.map-container').attr('show-floor-index');\r\n\r\n        if (!originFloorIndex || originFloorIndex == currentFloorIndex) {\r\n          $marker.attr('transform', 'translate(-10000 -10000)');\r\n        } else if (originFloorIndex < currentFloorIndex) {\r\n          $marker.attr('transform', 'translate(' + (x - 9) + ' ' + (y - 5) + '), rotate(0)');\r\n        } else {\r\n          $marker.attr('transform', 'translate(' + (x + 9) + ' ' + (y + 5) + '), rotate(180)');\r\n        }\r\n      });\r\n\r\n      $.each($pingMarkers, function(index, pingMarker) {\r\n        var $marker = $(pingMarker);\r\n        var currentFloorIndex = $marker.closest('.map-container').attr('show-floor-index');\r\n\r\n        if (!originFloorIndex || originFloorIndex == currentFloorIndex) {\r\n          $marker.removeClass('other-floor');\r\n        } else {\r\n          $marker.addClass('other-floor');\r\n        }\r\n      });\r\n    };\r\n    refreshPings();\r\n\r\n    $pingMarkers.addClass('highlight');\r\n    $pingMarkerAccents.addClass('highlight');\r\n    $pingMarkersVertical.addClass('highlight');\r\n    $pingMarkersHorizontal.addClass('highlight');\r\n\r\n    setTimeout(function() {\r\n      $pingMarkers.removeClass('highlight');\r\n      $pingMarkerAccents.removeClass('highlight');\r\n      $pingMarkersVertical.removeClass('highlight');\r\n      $pingMarkersHorizontal.removeClass('highlight');\r\n    }, 100);\r\n  };\r\n\r\n  var populateStartingMarkers = function populateStartingMarkers($drawingMarkerWrappers, SVG_DIM) {\r\n    var html = '';\r\n\r\n    html += '<svg class=\"svg-elements drawing-markers\" style=\"width: ' + SVG_DIM.WIDTH + 'px; left: -' + SVG_DIM.LEFT_OFFSET + 'px; height: ' + SVG_DIM.HEIGHT + 'px; top: -' + SVG_DIM.TOP_OFFSET + 'px;\">';\r\n    html += '<g>';\r\n    html += '<line class=\"ping-marker vertical\" x1=\"-9000\" y1=\"35\" x2=\"-10000\" y2=\"' + (SVG_DIM.HEIGHT + 35) + '\" stroke-width=\"2\"/>';\r\n    html += '<line class=\"ping-marker horizontal\" x1=\"-25\" y1=\"-10000\" x2=\"' + (SVG_DIM.WIDTH - 25) + '\" y2=\"-9000\" stroke-width=\"2\"/>';\r\n    html += '<circle class=\"ping-marker accent\" cx=\"-10000\" cy=\"-10000\" r=\"6\" stroke-width=\"2\"/>';\r\n    html += '<circle class=\"ping-marker center\" cx=\"-10000\" cy=\"-10000\" r=\"6\" stroke-width=\"2\"/>';\r\n    html += '<polygon class=\"ping-marker other-floor\" points=\"0,0 18,0 9,15.5884\" stroke-width=\"2\" transform=\"translate(-10000 -10000)\"></polygon>';\r\n    html += '</g>';\r\n    html += '</svg>';\r\n    $drawingMarkerWrappers.html(html);\r\n  };\r\n\r\n  var refreshPingsWrapper = function refreshPingsWrapper() {\r\n    refreshPings();\r\n  };\r\n\r\n  var setupMarkers = function setupMarkers ($mapMains, $drawingMarkerWrappers, SVG_DIM) {\r\n    populateStartingMarkers($drawingMarkerWrappers, SVG_DIM);\r\n\r\n    var $pingMarkers = $drawingMarkerWrappers.find('.ping-marker.center'),\r\n      $pingMarkerAccents = $drawingMarkerWrappers.find('.ping-marker.accent'),\r\n      $pingMarkersVertical = $drawingMarkerWrappers.find('.ping-marker.vertical'),\r\n      $pingMarkersHorizontal = $drawingMarkerWrappers.find('.ping-marker.horizontal'),\r\n      $pingMarkersOtherFloor = $drawingMarkerWrappers.find('.ping-marker.other-floor'),\r\n      handleTap = getHandleTapFn($pingMarkers, $pingMarkerAccents, $pingMarkersVertical, $pingMarkersHorizontal, $pingMarkersOtherFloor, SVG_DIM),\r\n      resizePingMarkers = getResizePingMarkersFn($pingMarkers, $pingMarkerAccents, $mapMains, $pingMarkersOtherFloor),\r\n      hidePingMarkers = getHidePingMarkersFn($pingMarkers, $pingMarkerAccents, $pingMarkersVertical, $pingMarkersHorizontal, $pingMarkersOtherFloor);\r\n\r\n    $mapMains.each(function(index, main) {\r\n      var mc = new Hammer(main);\r\n\r\n      mc.on('press', handleTap);\r\n      mc.on('tap', handleTap);\r\n    });\r\n    $pingMarkers.on('click', hidePingMarkers);\r\n    $mapMains.on('panzoomzoom', resizePingMarkers);\r\n    resizePingMarkers();\r\n  };\r\n\r\n  return  {\r\n    setupMarkers: setupMarkers,\r\n    refreshPings: refreshPingsWrapper\r\n  };\r\n})(window.jQuery, window, document);\r\n","'use strict';\r\n\r\n(function(pagecode) { //eslint-disable-line wrap-iife\r\n  pagecode(window.jQuery, window, document, R6MMainData, R6MMainRender, R6MMainControls, R6MMainDrawing, R6MMainMapSelectionGrid);\r\n}(function($, window, document, R6MMainData, R6MMainRender, R6MMainControls, R6MMainDrawing, R6MMainMapSelectionGrid, undefined) {\r\n  var $mapContainer,\r\n    $mapPanelsContainer,\r\n    $mapMains,\r\n    $mapElements,\r\n    $mapPanelsLabels,\r\n    $drawingMarkerWrappers,\r\n    $navLogo,\r\n    $body,\r\n    $mainNav,\r\n    SHOW_MAP = 'show-map',\r\n    SHOW_MAP_SELECTION_GRID = 'show-map-selection-grid',\r\n    HASH_SPLIT_CHAR = '/';\r\n\r\n  $(function() { // equivanelt to $(document).ready() - but a bit faster\r\n    associatePageVariables();\r\n    R6MMainRender.createMapPanels($mapPanelsContainer, 4);\r\n    associateMapVariables();\r\n    createMenu();\r\n    createMapSelectionGrid();\r\n    R6MMainControls.createMapCombo(R6MMainData.getMapData());\r\n    setPageEvents();\r\n    setMenuOptions();\r\n    R6MMainControls.setPanZoom($mapContainer, $mapMains, $mapElements);\r\n\r\n    if (setSelectedMapFromBookmark()) {\r\n      loadMap();\r\n      setSelectedFloorFromBookmark();\r\n      showMapContainer();\r\n    } else {\r\n      showMapSelectionGrid();\r\n      document.title = 'R6Calls.com';\r\n    }\r\n\r\n    setTimeout(function() {\r\n      $body.removeClass('loading');\r\n    }, 10);\r\n  });\r\n\r\n  var associatePageVariables = function associatePageVariables() {\r\n    $mapPanelsContainer = $('#map-panels-container');\r\n    $navLogo = $('#nav-logo');\r\n    $body = $('body');\r\n    $mainNav = $('#main-nav');\r\n  };\r\n\r\n  var associateMapVariables = function associateMapVariables() {\r\n    $mapContainer = $('.map-container');\r\n    $mapMains = $mapContainer.find('.map-main');\r\n    $mapElements = $mapMains.find('.map-elements');\r\n    $mapPanelsLabels = $('.map-panel-label');\r\n    $drawingMarkerWrappers = $mapMains.find('.svg-wrapper.drawing-markers');\r\n  };\r\n\r\n  var createMenu = function createMenu() {\r\n    var $menuLink = $('#mmenu-link');\r\n\r\n    R6MMainControls.getMenuHTML();\r\n\r\n    $('#mmenu-menu').mmenu({\r\n      offCanvas: {\r\n        position: 'right',\r\n        pageSelector: '#mmenu-page'\r\n      },\r\n      extensions: ['pagedim'],\r\n      rtl: {\r\n        use: false\r\n      }\r\n    });\r\n\r\n    $menuLink.click(menuClickEvent);\r\n  };\r\n\r\n  var createMapSelectionGrid = function createMapSelectionGrid() {\r\n    R6MMainMapSelectionGrid.createMapSelectionGrid(\r\n      $('#map-selection-grid'),\r\n      $('#map-selection-heading'),\r\n      $mainNav,\r\n      R6MMainData.getMapData(),\r\n      showSelectedMap,\r\n      hideMapSelectionGrid\r\n    );\r\n  };\r\n\r\n  var setPageEvents = function setPageEvents() {\r\n    R6MMainControls.setMapChangeEvent(mapChangeEvent);\r\n    R6MMainControls.setFloorsChangeEventAndHotkeys(floorChangeEvent, showSelectedFloor);\r\n    R6MMainControls.setMapPanelsCountChangeEvent(setMapPanelsCountChangeEvent);\r\n    R6MMainControls.MAP_LAYERS.forEach(function(layer) {\r\n      R6MMainControls.setMenuCheckboxChangeEvent(layer.short, saveOption);\r\n    });\r\n    R6MMainControls.setMenuCheckboxChangeEvent('lfa', saveOptionLockFloorAlignment);\r\n    R6MMainControls.setMenuSelectMapClickEvent(showMapSelectionGrid, closeMenu);\r\n    R6MMainControls.setMenuFullScreenClickEvent();\r\n\r\n    $(window).on('orientationchange', function() {\r\n      R6MMainControls.resetPan($mapMains, getResetDimensions);\r\n      R6MMainControls.resetZoom($mapMains, getResetDimensions);\r\n    });\r\n    $navLogo.on('click', toggleShowSelectMap);\r\n  };\r\n\r\n  var setMenuOptions = function setMenuOptions() {\r\n    loadMapPanelCount();\r\n    R6MMainControls.MAP_LAYERS.forEach(function(layer) {\r\n      setMenuCheckboxOption(layer.short);\r\n    });\r\n    setMenuCheckboxOption('lfa');\r\n  };\r\n\r\n  var loadMap = function loadMap() {\r\n    var mapName = R6MMainControls.getSelectedMap(),\r\n      mapData = R6MMainData.getMapData();\r\n\r\n    R6MMainControls.getFloorButtonsHTML(mapData[mapName].floors);\r\n    R6MMainRender.getMapHTML(mapData[mapName], $mapElements, $mapPanelsLabels);\r\n\r\n    R6MMainControls.resetPan($mapMains, getResetDimensions);\r\n    R6MMainControls.resetZoom($mapMains, getResetDimensions);\r\n\r\n    showSelectedFloor();\r\n\r\n    setLoadedMapKey(mapName);\r\n    $navLogo.addClass('enabled');\r\n    setTitle();\r\n\r\n    var svgMaps = document.getElementsByClassName('svgMap'),\r\n      i;\r\n\r\n    for (i = 0; i < svgMaps.length; i++) {\r\n      svgMaps[i].onload = function() {\r\n        setBackgroundTopLeft();\r\n        setLayerDisplays();\r\n        setFloorDisplay();\r\n      };\r\n    }\r\n\r\n    R6MMainDrawing.setupMarkers(\r\n      $mapMains,\r\n      $drawingMarkerWrappers,\r\n      R6MMainRender.SVG_DIM\r\n    );\r\n  };\r\n\r\n  var setBackgroundTopLeft = function setBackgroundTopLeft() {\r\n    R6MMainControls.setBackgroundTopLeft();\r\n  };\r\n\r\n  var setLayerDisplays = function setLayerDisplays() {\r\n    R6MMainControls.MAP_LAYERS.forEach(function(layer) {\r\n      R6MMainControls.setLayerDisplay(layer.short);\r\n    });\r\n  };\r\n\r\n  var setFloorDisplay = function setFloorDisplay() {\r\n    R6MMainControls.setFoorDisplay(R6MMainControls.getSelectedFloor());\r\n  };\r\n\r\n  var isMapLoaded = function isMapLoaded() {\r\n    return $body.attr('loaded-map');\r\n  };\r\n\r\n  var closeMenu = function closeMenu() {\r\n    getMenuApi().close();\r\n  };\r\n\r\n  var isShowingMap = function isShowingMap() {\r\n    return $body.hasClass(SHOW_MAP);\r\n  };\r\n\r\n  var getHashArgs = function getHashArgs() {\r\n    return window.location.hash.substr(1).split(HASH_SPLIT_CHAR);\r\n  };\r\n\r\n  var getLoadedMap = function getLoadedMap() {\r\n    return $('body').attr('loaded-map');\r\n  };\r\n\r\n  var getMenuApi = function getMenuApi() {\r\n    return $('#mmenu-menu').data( 'mmenu' );\r\n  };\r\n\r\n  var getResetDimensions = function getResetDimensions() {\r\n    var zoomPoints = {\r\n      topLeft: { top: -180, left: -312 }, // default\r\n      bottomRight: { top: 180, left: 312 }\r\n    };\r\n    var zoomWidth = zoomPoints.bottomRight.left - zoomPoints.topLeft.left,\r\n      zoomHeight = zoomPoints.bottomRight.top - zoomPoints.topLeft.top,\r\n      centerTop = Math.round(zoomPoints.bottomRight.top - (zoomHeight / 2)),\r\n      centerLeft = Math.round(zoomPoints.topLeft.left + (zoomWidth / 2)),\r\n      panelWidth = $mapContainer.width(),\r\n      panelHeight = $mapContainer.height(),\r\n      navHeight = $mainNav.height(),\r\n      paddingWidth = Math.min(panelHeight * 0.1, navHeight),\r\n      paddingHeight = Math.min(panelHeight * 0.1, navHeight * 2);\r\n\r\n    panelWidth = panelWidth - paddingWidth;\r\n    panelHeight = panelHeight - paddingHeight;\r\n    var result = {\r\n      debugZoomWidth: zoomWidth,\r\n      debugZoomHeight: zoomHeight,\r\n      centerTop: centerTop,\r\n      centerLeft: centerLeft,\r\n      debugPanelWidth: panelWidth,\r\n      debugPanelHeight: panelHeight,\r\n      debugPaddingWidth: paddingWidth,\r\n      debugPaddingHeight: paddingHeight,\r\n      zoomValue: Math.max(\r\n        Math.min(\r\n          1,\r\n          panelWidth / zoomWidth,\r\n          panelHeight / zoomHeight\r\n        ),\r\n        0.5\r\n      )\r\n    };\r\n\r\n    return result;\r\n  };\r\n\r\n  var floorChangeEvent = function floorChangeEvent() {\r\n    showSelectedFloor();\r\n    setPageURL();\r\n    R6MMainDrawing.refreshPings(); // hacky drawing module for now\r\n  };\r\n\r\n  var mapChangeEvent = function mapChangeEvent() {\r\n    loadMap();\r\n    setPageURL();\r\n  };\r\n\r\n  var setMapPanelsCountChangeEvent = function setMapPanelsCountChangeEvent(mapPanelsCount) {\r\n    setMapPanelsCount(mapPanelsCount);\r\n    setFloorDisplay();\r\n  };\r\n\r\n  var menuClickEvent = function menuClickEvent(e) {\r\n    var menuApi = getMenuApi();\r\n\r\n    e.preventDefault();\r\n    menuApi.open();\r\n  };\r\n\r\n  var localStorageSetItem = function localStorageSetItem(index, value) {\r\n    try {\r\n      localStorage.setItem(index, value);\r\n    } catch (e) {\r\n      //guarding against safari in private browsing mode\r\n    }\r\n  };\r\n\r\n  var removeHashFromUrl = function removeHashFromUrl() {\r\n    var scrollV, scrollH, loc = window.location;\r\n\r\n    if ('pushState' in history) {\r\n      history.pushState('', document.title, loc.pathname + loc.search);\r\n    } else {\r\n      // Prevent scrolling by storing the page's current scroll offset\r\n      scrollV = document.body.scrollTop;\r\n      scrollH = document.body.scrollLeft;\r\n\r\n      loc.hash = '';\r\n      // Restore the scroll offset, should be flicker free\r\n      document.body.scrollTop = scrollV;\r\n      document.body.scrollLeft = scrollH;\r\n    }\r\n  };\r\n\r\n  var saveOption = function saveOption(key, value) {\r\n    localStorageSetItem(key, value);\r\n  };\r\n\r\n  var saveOptionLockFloorAlignment = function saveOptionLockFloorAlignment(key, value) {\r\n    localStorageSetItem(key, value);\r\n    if (value) {\r\n      R6MMainControls.resetPan($mapMains, getResetDimensions);\r\n    }\r\n  };\r\n\r\n  var setLoadedMapKey = function setLoadedMapKey(mapName) {\r\n    $body.attr('loaded-map', mapName);\r\n  };\r\n\r\n  var setMapPanelsCount = function setMapPanelsCount(mapPanelsCount) {\r\n    localStorageSetItem('mappanelscount', mapPanelsCount);\r\n    $mapPanelsContainer.attr('map-panels-count', mapPanelsCount);\r\n\r\n    $.each($mapMains, function (index, map) {\r\n      if (index < mapPanelsCount) {\r\n        $(map).css('display', 'block');\r\n        R6MMainControls.enableZoom($(map));\r\n      } else {\r\n        $(map).css('display', 'none');\r\n        R6MMainControls.disableZoom($(map));\r\n      }\r\n    });\r\n\r\n    R6MMainControls.resetPan($mapMains, getResetDimensions);\r\n    R6MMainControls.resetZoom($mapMains, getResetDimensions);\r\n\r\n    showSelectedFloor();\r\n  };\r\n\r\n  var showMapSelectionGrid = function showMapSelectionGrid() {\r\n    $body.removeClass(SHOW_MAP);\r\n    $body.addClass(SHOW_MAP_SELECTION_GRID);\r\n    setPageURL();\r\n    setTitle();\r\n  };\r\n\r\n  var showMapContainer = function showMapContainer() {\r\n    $body.removeClass(SHOW_MAP_SELECTION_GRID);\r\n    $body.addClass(SHOW_MAP);\r\n    setPageURL();\r\n    setTitle();\r\n  };\r\n\r\n  var showSelectedFloor =  function showSelectedFloor() {\r\n    var floorsMinMaxIndexes = R6MMainControls.getMinMaxFloor();\r\n\r\n    R6MMainRender.showFloor(\r\n      R6MMainControls.getSelectedFloor(),\r\n      $mapPanelsContainer,\r\n      $mapContainer,\r\n      floorsMinMaxIndexes.min,\r\n      floorsMinMaxIndexes.max\r\n    );\r\n  };\r\n\r\n  var showSelectedMap = function showSelectedMap(mapName) {\r\n    if (R6MMainControls.setSelectedMap(mapName)) {\r\n      hideMapSelectionGrid();\r\n      setTimeout(function() {\r\n        loadMap();\r\n        showMapContainer();\r\n      },1);\r\n    }\r\n  };\r\n\r\n  var toggleShowSelectMap = function toggleShowSelectMap(event) {\r\n    var menuApi = getMenuApi();\r\n\r\n    event.preventDefault();\r\n    if (isShowingMap()) {\r\n      showMapSelectionGrid();\r\n      menuApi.close();\r\n    } else if (isMapLoaded()) {\r\n      showMapContainer();\r\n      menuApi.close();\r\n    }\r\n  };\r\n\r\n  var hideMapSelectionGrid = function hideMapSelectionGrid() {\r\n    if (isMapLoaded()) {\r\n      showMapContainer();\r\n    }\r\n  };\r\n\r\n  var setMenuCheckboxOption = function setMenuCheckboxOption(key) {\r\n    var menuOption = localStorage.getItem(key);\r\n\r\n    if (menuOption !== null) {\r\n      R6MMainControls.setMenuCheckboxOption(key, menuOption);\r\n    }\r\n  };\r\n\r\n  var loadMapPanelCount = function loadMapPanelCount() {\r\n    var mapPanelsCount = localStorage.getItem('mappanelscount');\r\n\r\n    if (!mapPanelsCount) {\r\n      var $window = $(window);\r\n\r\n      mapPanelsCount = (\r\n        ($window.width() > 1000) || ($window.height() > 1000)\r\n      ) ? 2 : 1;\r\n    }\r\n    R6MMainControls.setSelectedMapPanel(mapPanelsCount);\r\n    setMapPanelsCount(mapPanelsCount);\r\n  };\r\n\r\n  var setSelectedMapFromBookmark = function setSelectedMapFromBookmark() {\r\n    var hashArgs = getHashArgs(),\r\n      mapName = hashArgs[0];\r\n\r\n    return R6MMainControls.setSelectedMap(mapName);\r\n  };\r\n\r\n  var setSelectedFloorFromBookmark = function setSelectedFloorFromBookmark() {\r\n    var hashArgs = getHashArgs(),\r\n      floorArg = hashArgs[1];\r\n\r\n    if (R6MMainControls.setSelectedFloor(floorArg)) {\r\n      showSelectedFloor();\r\n    }\r\n  };\r\n\r\n  var setPageURL = function setPageURL() {\r\n    if (isShowingMap()) {\r\n      var hashText = '';\r\n\r\n      hashText += '' + R6MMainControls.getSelectedMap();\r\n      hashText += HASH_SPLIT_CHAR + R6MMainControls.getSelectedFloor();\r\n      window.location.hash = hashText;\r\n    } else {\r\n      removeHashFromUrl();\r\n    }\r\n  };\r\n\r\n  var setTitle = function setTitle() {\r\n    document.title = isShowingMap() ?\r\n      'R6Calls.com - {mapName}'.replace(\r\n        '{mapName}',\r\n        R6MMainData.getMapData()[getLoadedMap()].name\r\n      ) :\r\n      'R6Calls.com - Select a map';\r\n  };\r\n}));\r\n"],"names":["R6MMainData","floorTerms","subBasement","full","short","basement","firstFloor","secondFloor","thirdFloor","fourthFloor","roof","getMapData","bank","name","imgUrlPrefix","floors","index","dontSelect","default","bartlett","border","chalet","club","coastline","consulate","favela","fortress","hereford","house","kafe","kanal","oregon","outback","plane","skyscraper","themepark","tower","villa","yacht","R6MMainRender","$","SVG_DIM","WIDTH","HEIGHT","TOP_OFFSET","LEFT_OFFSET","fn","removeClassPrefix","prefix","this","each","i","el","classes","className","split","filter","c","lastIndexOf","trim","join","FLOOR_CSS_TEXT","-1","0","1","2","3","4","5","getMapHTML","mapData","$mapElements","$mapPanelsLabels","html","cssClass","forEach","floor","createMapPanels","$mapPanelsContainer","mapPanelsCount","x","append","showFloor","selectedFloorIndex","$mapContainer","minFloorIndex","maxFloorIndex","attr","Math","max","tempMinIndex","startingIndex","min","map","showObjective","objective","objectivePrefix","addClass","window","jQuery","document","R6MMainControls","getSelectedFloor","$floorControl","find","data","getMinMaxFloor","$floorInputs","length","getHandleZoomChangeFn","zoomVal","$zoomControl","val","ZOOMED_IN_FAR_CLASS","ZOOMED_OUT_FAR_CLASS","removeClass","handlePanZoomEnd","trigger","getSelectedMap","$mapControl","setOption","$selectEl","optionName","$option","prop","setLayerDisplay","key","j","visible","getDisplayValue","svgMaps","getElementsByClassName","svgObject","getSVGDocument","layer","getElementById","style","display","setFoorDisplay","floorNumber","minMaxFloor","selectedFloorNumber","currentFloor","$mapPanelsCountControl","$fullScreenControl","$menuMapSelectionControl","$menuControl","$menuPanel","SELECTED_CLASS","MAP_LAYERS","setSelectedFloor","floorIndex","$selectedFloor","resetSelectedFloor","getFloorTooltip","shortcutTip","replace","is","isFullScreenAvailable","fullscreenEnabled","webkitFullscreenEnabled","webkitCancelFullScreen","mozFullScreenEnabled","msFullscreenEnabled","setSelectedMap","mapName","setupFloorChangeEvent","callback","on","e","floorButton","target","tagName","parent","currentTarget","getAttribute","setupFloorHotkeys","showSelectedFloorFn","keyCode","which","toggleFullScreen","rootEl","fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","documentElement","requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","mozRequestFullScreen","msRequestFullscreen","showLockControls","panelsCount","$lockWrapper","show","hide","getFloorButtonsHTML","buttonsAsString","tooltip","initalFloor","setFloorsChangeEventAndHotkeys","handleChangeCallback","setMapPanelsCountChangeEvent","event","setSelectedMapPanel","number","result","createMapCombo","optionsAsString","maps","mapKey","hasOwnProperty","push","sort","a","b","setMapChangeEvent","getMenuHTML","setMenuFullScreenClickEvent","setMenuSelectMapClickEvent","showSelectMapCallback","closeMenuCallback","preventDefault","setMenuCheckboxOption","isChecked","boolValue","setMenuCheckboxChangeEvent","change","setBackgroundTopLeft","mainSVG","top","left","parentElement","resetPan","$mapMains","getResetDimensions","resetDimensions","panzoom","centerLeft","zoomValue","centerTop","disableZoom","enableZoom","isZoomed","resetZoom","setPanZoom","$zoomRange","minScale","maxScale","deltaY","click","transform","silent","MIN_COLUMN_NUM","MAX_COLUMN_NUM","NATIVE_THUMB_IMG_WIDTH","NATIVE_THUMB_IMG_HEIGHT","NATIVE_THUMB_IMG_RATIO","VIEWPORT_PADDING_HEIGHT","VIEWPORT_PADDING_WIDTH","MAP_LINK_TOTAL_BORDER_SIZE","MIN_MAP_LINK_WIDTH","THUMB_SCALE_ZOOMED_IN_FACTOR","R6MMainMapSelectionGrid","getOptimalDimensions","columnCountsToConsider","mapLinkCount","availableWidth","availableHeight","results","columnCount","mapLinkMarginVertical","mapLinkMarginHorizontal","rowCount","ceil","mapLinkWidth","mapLinkHeight","mapLinkRatio","ratio","abs","round","extend","_debugColumnCount","_debugRowCount","_debugAvailableWidth","_debugAvailableHeight","width","height","marginVertical","marginHorizontal","resizeMapLinks","$selectMapGrid","$mapLinks","$mainNav","thumbDimensions","viewportDimensions","navHeight","columnCounts","numThumbs","numThumbsLastRow","getColumnCounts","mapLinkDimensions","thumbImgScale","$spinners","css","setTransformScale","hover","closest","element","scale","createMapSelectionGrid","$heading","showSelectedMapCallback","hideMapSelectionGridCallback","text","getMapGridHTML","handleResize","setTimeout","load","remove","PING_MARKER_RADIUS","MIN_PING_MARKER_RADIUS","MAX_PING_MARKER_RADIUS","PING_MARKER_BORDER_PERCENT","MIN_PING_MARKER_BORDER","refreshPings","R6MMainDrawing","getPingPosition","y","mapWrapper","centerX","offset","centerY","transforms","transformX","parseInt","transformY","movePingMarkers","$pingMarkers","$pingMarkerAccents","$pingMarkersVertical","$pingMarkersHorizontal","$pingMarkersOtherFloor","originFloorIndex","otherFloorMarker","$marker","currentFloorIndex","pingMarker","setupMarkers","$drawingMarkerWrappers","handleTap","$mapWrapper","pingPosition","center","newX","newY","resizePingMarkers","radius","strokeWidth","hidePingMarkers","main","mc","Hammer","$navLogo","$body","SHOW_MAP","SHOW_MAP_SELECTION_GRID","HASH_SPLIT_CHAR","associatePageVariables","associateMapVariables","createMenu","setPageEvents","setMenuOptions","setSelectedMapFromBookmark","loadMap","setSelectedFloorFromBookmark","showMapContainer","showMapSelectionGrid","title","$menuLink","mmenu","offCanvas","position","pageSelector","extensions","rtl","use","menuClickEvent","showSelectedMap","hideMapSelectionGrid","mapChangeEvent","floorChangeEvent","showSelectedFloor","saveOption","saveOptionLockFloorAlignment","closeMenu","toggleShowSelectMap","loadMapPanelCount","setLoadedMapKey","setTitle","onload","setLayerDisplays","setFloorDisplay","isMapLoaded","getMenuApi","close","isShowingMap","hasClass","getHashArgs","location","hash","substr","getLoadedMap","zoomPoints","topLeft","bottomRight","zoomWidth","zoomHeight","panelWidth","panelHeight","paddingWidth","paddingHeight","debugZoomWidth","debugZoomHeight","debugPanelWidth","debugPanelHeight","debugPaddingWidth","debugPaddingHeight","setPageURL","setMapPanelsCount","menuApi","open","localStorageSetItem","value","localStorage","setItem","removeHashFromUrl","scrollV","scrollH","loc","history","pushState","pathname","search","body","scrollTop","scrollLeft","floorsMinMaxIndexes","menuOption","getItem","$window","hashArgs","floorArg","hashText","pagecode"],"mappings":"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"}